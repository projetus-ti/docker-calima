{"version":3,"sources":["models/dtos/mcg/lalurParteB.ts","models/enumerated/mcg/parteBTipoEnum.ts","views/pages/mcg/lalurParteB/LalurParteBEditView.tsx","../node_modules/reactstrap/es/CardTitle.js","models/enumerated/mlf/tipoDebitoCreditoEnum.ts"],"names":["__webpack_require__","d","__webpack_exports__","CLASS_NAME","PREJUIZO","label","value","extraFields","intValue","LalurParteBEditView","props","selectedItem","getSelectedItem","globalReducer","useSelector","state","formProps","useForm","defaultValues","Object","objectSpread2","tipoDebitoCredito","DEBITO","mode","useEffect","id","globalParameter","empresaMCG","setTimeout","setValue","codigo","undefined","substr","alertManager","emit","ACTION_EVENTS","SHOW","message","concat","react_default","a","createElement","summer_esm","title","editViewProps","dtoClassName","validateExtras","erros","lancamento","lalurParteBReflexos","length","dataIncorreta","referenciaItem","parseDateToRef","data","tipoParteB","_step","_iterator","createForOfIteratorHelper","s","n","done","lalurLacsImpostoReferencia","referencia","err","e","f","saldo","push","valorLancamentos","_step2","_iterator2","toLocaleString","currency","style","hidden","Row","Col","validation","required","onlyNumber","isPrependLabel","placeholder","type","InputType","DATE","maxLength","NUMBER","TEXT_AREA","Card","className","CardBody","CardTitle","lib_default","keyField","columns","dataField","text","editable","sort","responsive","striped","_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__","_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_2___default","prop_types__WEBPACK_IMPORTED_MODULE_3__","prop_types__WEBPACK_IMPORTED_MODULE_3___default","classnames__WEBPACK_IMPORTED_MODULE_4__","classnames__WEBPACK_IMPORTED_MODULE_4___default","_utils__WEBPACK_IMPORTED_MODULE_5__","propTypes","tag","string","cssModule","object","Tag","attributes","classes","defaultProps","TIPO_DEBITO_CREDITO_ENUM_VALUES"],"mappings":"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","file":"static/js/355.a7f8495a.chunk.js","sourcesContent":["import { LalurLacsParteB } from './lalurLacsParteB';\r\nimport { LalurParteBReflexo } from './lalurParteBReflexo';\r\n\r\nexport interface LalurParteB extends LalurLacsParteB {\r\n  lalurParteBReflexos?: LalurParteBReflexo[];\r\n}\r\n\r\nexport const CLASS_NAME = 'br.com.projetusinformatica.calima.mcg.model.dto.lalurparteb';\r\n","export const COMPENSACAO = { label: 'Compensação', value: 'COMPENSACAO', extraFields: { intValue: 1 } };\r\nexport const PREJUIZO = { label: 'Prejuízo', value: 'PREJUIZO', extraFields: { intValue: 2 } };\r\n\r\nexport const PARTE_B_TIPO_ENUM_VALUES = [COMPENSACAO, PREJUIZO];\r\n","import React, { useEffect } from 'react';\r\nimport BootstrapTable from 'react-bootstrap-table-next';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useSelector } from 'react-redux';\r\nimport { RouteComponentProps } from 'react-router';\r\nimport { Card, CardBody, CardTitle, Col, Row } from 'reactstrap';\r\nimport {\r\n  ACTION_EVENTS,\r\n  alertManager,\r\n  ColumnsProps,\r\n  EditForm,\r\n  EditViewProps,\r\n  getSelectedItem,\r\n  InputGroupInline,\r\n  InputType,\r\n  onlyNumber,\r\n  parseDateToRef,\r\n  WindowComponent,\r\n} from 'summer';\r\nimport { CLASS_NAME, LalurParteB } from '../../../../models/dtos/mcg/lalurParteB';\r\nimport { PREJUIZO } from '../../../../models/enumerated/mcg/parteBTipoEnum';\r\nimport { DEBITO } from '../../../../models/enumerated/mlf/tipoDebitoCreditoEnum';\r\nimport { Reducers } from '../../../../store/ducks';\r\nimport { GlobalState } from '../../../../store/ducks/global.duck';\r\n\r\ninterface LalurParteBFormProps extends EditViewProps<LalurParteB> {}\r\n\r\nconst LalurParteBEditView: React.FC<LalurParteBFormProps & RouteComponentProps> = props => {\r\n  const selectedItem = getSelectedItem(props);\r\n  const globalReducer = useSelector<Reducers, GlobalState>(state => state.globalReducer);\r\n  const formProps = useForm<LalurParteB>({ defaultValues: { tipoDebitoCredito: DEBITO.value, ...selectedItem }, mode: 'onBlur' });\r\n\r\n  useEffect(\r\n    () => {\r\n      const {\r\n        empresaMCG: { id },\r\n      } = globalReducer.globalParameter;\r\n\r\n      setTimeout(() => {\r\n        // @ts-ignore\r\n        formProps.setValue('empresaMCG.id', id);\r\n        if (\r\n          selectedItem.codigo !== null &&\r\n          selectedItem.codigo !== undefined &&\r\n          (selectedItem.codigo.substr(0, 4) === '1001' || selectedItem.codigo.substr(0, 4) === '9001')\r\n        ) {\r\n          alertManager.emit(ACTION_EVENTS.SHOW, {\r\n            message: `Alterações nos registros de Código ${selectedItem.codigo} que são gerenciados pelo Calima podem acarretar erros futuros na exportação dos dados para o SPED ECF.`,\r\n          });\r\n        }\r\n      }, 500);\r\n    }, // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    []\r\n  );\r\n\r\n  const columns: ColumnsProps[] = [\r\n    {\r\n      dataField: 'rowNumber',\r\n      hidden: true,\r\n      text: 'Row Number',\r\n    },\r\n    {\r\n      dataField: 'historico',\r\n      editable: false,\r\n      sort: true,\r\n      text: 'Histórico',\r\n    },\r\n    {\r\n      dataField: 'saldo',\r\n      editable: false,\r\n      sort: true,\r\n      text: 'Saldo',\r\n    },\r\n    {\r\n      dataField: 'tipoParteB',\r\n      editable: false,\r\n      sort: true,\r\n      text: 'Tipo',\r\n    },\r\n    {\r\n      dataField: 'lalurLacsImpostoReferencia.referencia',\r\n      editable: false,\r\n      sort: true,\r\n      text: 'Referência',\r\n    },\r\n  ];\r\n\r\n  const valiateExtras = () => {\r\n    const erros = [];\r\n    let lancamento: any;\r\n\r\n    if (selectedItem.lalurParteBReflexos && selectedItem.lalurParteBReflexos.length > 0) {\r\n      let dataIncorreta: boolean = false;\r\n      const referenciaItem: string = parseDateToRef(selectedItem.data);\r\n      if (selectedItem.lalurParteBReflexos[0].tipoParteB === PREJUIZO.value) {\r\n        for (lancamento of selectedItem.lalurParteBReflexos) {\r\n          if (!dataIncorreta && lancamento.lalurLacsImpostoReferencia.referencia > referenciaItem) {\r\n            dataIncorreta = true;\r\n          }\r\n        }\r\n        if (selectedItem.saldo > 0) {\r\n          erros.push('O valor do saldo deve ser zero pois existem lançamentos do tipo Prejuízo vinculados a conta');\r\n        }\r\n        if (dataIncorreta) {\r\n          erros.push('A data da Conta Parte B não pode ser menor do que a referncia dos lançamentos já cadastrados');\r\n        }\r\n      } else {\r\n        let valorLancamentos: number = 0;\r\n        for (lancamento of selectedItem.lalurParteBReflexos) {\r\n          valorLancamentos += lancamento.saldo;\r\n          if (!dataIncorreta && lancamento.lalurLacsImpostoReferencia.referencia.substr(0, 4) <= referenciaItem.substr(0, 4)) {\r\n            dataIncorreta = true;\r\n          }\r\n        }\r\n        if (selectedItem.saldo < valorLancamentos) {\r\n          erros.push(\r\n            `O valor do saldo deve ser igual ou superior ao somatório dos lançamentos cadastrado que é ${selectedItem.saldo.toLocaleString('pt-br', {\r\n              currency: 'BRL',\r\n              style: 'currency',\r\n            })}`\r\n          );\r\n        }\r\n        if (dataIncorreta) {\r\n          erros.push('A data da Conta Parte B não pode ser maior do que a referncia dos lançamentos já cadastrados');\r\n        }\r\n      }\r\n    }\r\n\r\n    return erros;\r\n  };\r\n\r\n  return (\r\n    <WindowComponent title=\"Manutenção de Contas Parte B Lalur\">\r\n      <EditForm formProps={formProps} editViewProps={props} dtoClassName={CLASS_NAME} validateExtras={valiateExtras}>\r\n        <InputGroupInline formProps={formProps} id=\"empresaMCG.id\" hidden={true} />\r\n        <InputGroupInline formProps={formProps} id=\"tipoDebitoCredito\" hidden={true} />\r\n        <Row>\r\n          <Col>\r\n            <InputGroupInline\r\n              formProps={{ ...formProps, validation: { required: true, ...onlyNumber(0, 5) } }}\r\n              id=\"codigo\"\r\n              isPrependLabel={true}\r\n              label=\"Código\"\r\n              placeholder=\"Informe o Código\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <InputGroupInline\r\n              formProps={{ ...formProps, validation: { required: true } }}\r\n              id=\"data\"\r\n              isPrependLabel={true}\r\n              label=\"Data\"\r\n              placeholder=\"Informe a data\"\r\n              type={InputType.DATE}\r\n            />\r\n          </Col>\r\n          <Col>\r\n            <InputGroupInline\r\n              formProps={{ ...formProps, validation: { required: true, maxLength: 15 } }}\r\n              id=\"saldo\"\r\n              isPrependLabel={true}\r\n              label=\"Saldo Inicial\"\r\n              placeholder=\"Informe a Saldo Inicial\"\r\n              type={InputType.NUMBER}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <InputGroupInline\r\n              formProps={{ ...formProps, validation: { required: true, maxLength: 200 } }}\r\n              id=\"descricao\"\r\n              isPrependLabel={true}\r\n              label=\"Descrição\"\r\n              placeholder=\"Informe a descrição\"\r\n              type={InputType.TEXT_AREA}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Card className=\"mb-3\">\r\n          <CardBody>\r\n            <CardTitle>Lista de Lançamentos na Parte B do LALUR</CardTitle>\r\n            <BootstrapTable keyField=\"id\" data={selectedItem.lalurParteBReflexos || []} columns={columns} responsive={true} striped={true} />\r\n          </CardBody>\r\n        </Card>\r\n      </EditForm>\r\n    </WindowComponent>\r\n  );\r\n};\r\n\r\nexport default LalurParteBEditView;\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  className: PropTypes.string,\n  cssModule: PropTypes.object\n};\nvar defaultProps = {\n  tag: 'div'\n};\n\nvar CardTitle = function CardTitle(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      Tag = props.tag,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"tag\"]);\n\n  var classes = mapToCssModules(classNames(className, 'card-title'), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes\n  }));\n};\n\nCardTitle.propTypes = propTypes;\nCardTitle.defaultProps = defaultProps;\nexport default CardTitle;","export const DEBITO = { value: 'debito', label: 'Débito' };\r\nexport const CREDITO = { value: 'credito', label: 'Crédito' };\r\n\r\nexport const TIPO_DEBITO_CREDITO_ENUM_VALUES = [DEBITO, CREDITO];\r\n"],"sourceRoot":""}