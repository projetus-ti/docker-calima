(window.webpackJsonp=window.webpackJsonp||[]).push([[533],{1187:function(e,a,t){"use strict";t.r(a);var r=t(149),n=t(12),l=t(6),s=t(25),c=t(0),o=t.n(c),i=t(98),m=t(19),b=t(395),d=t(198),p=t(148),u=t(782),g=t(779),E=t(780),O=t(783),j=t(781),f=t(786),P=t(97),h=t(147),C=t(2),S=t(815),I=t(826),N=t(818),R=t(819),T=t(830),w=t(820),y=t(869),A=t(1120);const F=Object(l.a)(Object(l.a)({},Object(N.a)(A.a)),{},{cabecalhoTxt:"Mensagem",gerarCabecalhoPadraoAdministradora:!0,title:"Resultado da Integra\xe7\xe3o de M\xf3dulo Fiscal."}),V=Object(l.a)(Object(l.a)({},Object(R.a)("printPendenciasIntegracao",C.W.value)),{},{exibirConfiguracaoDadosEmpresa:!1});a.default=(e=>{const a=Object(c.useState)(1),t=Object(n.a)(a,2),N=t[0],R=t[1],A=Object(m.c)(e=>e.globalReducer),v=Object(i.b)({mode:"onBlur"}),G=v.handleSubmit,M=Object(r.a)(v,["handleSubmit"]),x=Object(i.b)({defaultValues:{contaPagar:!0,contaReceber:!0,gerarCTranspEntrada:!0,gerarCTranspSaida:!0,gerarEntrada:!0,gerarImpostos:!0,gerarSaida:!0},mode:"onBlur"}),D=Object(c.useState)(!1),L=Object(n.a)(D,2),z=L[0],W=L[1],k=Object(c.useState)(!1),q=Object(n.a)(k,2),B=q[0],K=q[1],H=Object(c.useState)(void 0),J=Object(n.a)(H,2),Y=J[0],Q=J[1],U=Object(m.b)(),X=e=>{Object(T.M)(e,{errorFunction:e=>{Object(C.tc)(e,C.A),U(C.nc.hideProgress())},thenFunction:e=>{U(C.nc.hideProgress()),(e=>{if(e&&Object(C.Yb)(e.fracasso.length>0)&&Object(C.Yb)(e.sucesso.length>0)){const e={message:"N\xe3o existem registros a serem integrados.",type:C.f.INFORMATION};C.pb.emit(C.a.SHOW,e)}else Q(e),W(!0)})(e)}})};Object(c.useEffect)(()=>{if(A.globalParameter.empresa){const e=A.globalParameter,a=e.empresa.id,t=e.empresaMCG;setTimeout(()=>{x.setValue("idGerEmpresa",a),x.setValue("dtInicial",Object(C.Nb)(Object(C.jc)(t.refAtual,1))),x.setValue("dtFinal",Object(C.Nb)(Object(C.jc)(t.refAtual,0)))},1e3)}},[]);return o.a.createElement(C.ib,{title:"Integra\xe7\xe3o Fiscal",useGlobalParameter:!0,globalParameter:A.globalParameter,dependencies:[()=>Object(S.a)(A.globalParameter),()=>Object(I.a)(A.globalParameter)]},z?o.a.createElement(y.a,Object.assign({},e,{errorList:Y.fracasso,successList:Y.sucesso,printReport:()=>{K(!0)}})):o.a.createElement(b.a,null,o.a.createElement(C.K,{formProps:x,id:"idGerEmpresa",hidden:!0}),o.a.createElement(d.a,null,o.a.createElement(p.a,null,o.a.createElement(C.K,{id:"dtInicial",label:"Data Inicial",isPrependLabel:!0,formProps:Object(l.a)(Object(l.a)({},x),{},{validation:{required:!0}}),type:C.L.DATE})),o.a.createElement(p.a,null,o.a.createElement(C.K,{id:"dtFinal",label:"Data final",isPrependLabel:!0,formProps:Object(l.a)(Object(l.a)({},x),{},{validation:{required:!0}}),type:C.L.DATE}))),o.a.createElement(d.a,{className:"mb-3"},o.a.createElement(p.a,null,o.a.createElement(u.a,{tabs:!0},o.a.createElement(g.a,null,o.a.createElement(E.a,{className:Object(s.a)({active:1===N}),tabIndex:1,onClick:({target:e})=>{const a=e.tabIndex;N!==a&&R(a)}},"Op\xe7\xf5es de Importa\xe7\xe3o"))),o.a.createElement(O.a,{className:"mb-5",activeTab:N},o.a.createElement(j.a,{tabId:1,className:"mb-0 p-3"},o.a.createElement(d.a,{className:"mb-3"},o.a.createElement(p.a,null,o.a.createElement(f.a,{type:"switch",id:"gerarEntrada",name:"gerarEntrada",label:"Entrada",innerRef:x.register}))),o.a.createElement(d.a,{className:"mb-3"},o.a.createElement(p.a,null,o.a.createElement(f.a,{type:"switch",id:"gerarSaida",name:"gerarSaida",label:"Sa\xedda",innerRef:x.register}))),o.a.createElement(d.a,{className:"mb-3"},o.a.createElement(p.a,null,o.a.createElement(f.a,{type:"switch",id:"gerarCTranspEntrada",name:"gerarCTranspEntrada",label:"Conhecimento de Transp. Entrada",innerRef:x.register}))),o.a.createElement(d.a,{className:"mb-3"},o.a.createElement(p.a,null,o.a.createElement(f.a,{type:"switch",id:"gerarCTranspSaida",name:"gerarCTranspSaida",label:"Conhecimento de Transp. Sa\xedda",innerRef:x.register}))),o.a.createElement(d.a,{className:"mb-3"},o.a.createElement(p.a,null,o.a.createElement(f.a,{type:"switch",id:"gerarImpostos",name:"gerarImpostos",label:"Impostos",innerRef:x.register}))),o.a.createElement(d.a,{className:"mb-3"},o.a.createElement(p.a,null,o.a.createElement(f.a,{type:"switch",id:"contaPagar",name:"contaPagar",label:"Contas a Pagar",innerRef:x.register}))),o.a.createElement(d.a,{className:"mb-3"},o.a.createElement(p.a,null,o.a.createElement(f.a,{type:"switch",id:"contaReceber",name:"contaReceber",label:"Contas a Pagar",innerRef:x.register}))))))),o.a.createElement(d.a,null,o.a.createElement(p.a,null,o.a.createElement(C.R,{handleSubmit:x.handleSubmit(e=>{const a=(()=>{const e=[],a=x.getValues(),t=a.contaPagar,r=a.contaReceber,n=a.gerarImpostos,l=a.gerarCTranspEntrada,s=a.gerarEntrada,c=a.gerarCTranspSaida,o=a.gerarSaida,i=A.globalParameter.empresa,m=i.matriz,b=i.grupoEmpresaRaiz,d=!t&&!r&&!n,p=!l&&!s,u=!c&&!o;return x.getValues().dtInicial>x.getValues().dtFinal&&e.push("Data Final n\xe3o pode ser menor que a Data Inicial."),d&&p&&u&&e.push("Nenhum op\xe7\xe3o de importa\xe7\xe3o selecionada."),m&&!0===m.centralizar&&null!==b.grupoEmpresaConfig&&null!==m.grupoEmpresa.grupoEmpresaConfig&&b.grupoEmpresaConfig.grupoPlanoConta.id!==m.grupoEmpresa.grupoEmpresaConfig.grupoPlanoConta.id&&e.push("A Empresa Atual precisa ter o mesmo Grupo de Plano de Contas da Empresa Matriz para fazer a integra\xe7\xe3o Fiscal. Configure corretamente em M\xf3dulo Princial > Manuten\xe7\xe3o > Configura\xe7\xf5es > Grupo de Empresas > Grupo de Plano de Contas"),e})();if(a.length>0){const e={message:o.a.createElement(C.C,{erros:a}),type:C.f.WARNING};C.pb.emit(C.a.SHOW,e)}else U(C.nc.showProgress({animated:!0,className:"progress-bar-rounded progress-animated-alt",color:"first",label:"Aguarde processando...",striped:!0,value:100})),X(e)}),btnSubmitLabel:"Integrar",handleClose:()=>((a=!0)=>{Object(C.Cb)(e,e.history,a)})()})))),o.a.createElement(P.a,{isOpen:B,size:"lg"},o.a.createElement(h.a,null,o.a.createElement(w.a,{routeProps:Object(l.a)({},e),handleSubmit:G,formProps:Object(l.a)({},M),reportBasicValues:F,reportViewOptions:V,addExtraParameters:e=>(e.erros=Y.fracasso.map(e=>e.message),e),extraConfigOpened:!0}))))})}}]);
//# sourceMappingURL=533.e7a51d3e.chunk.js.map