{"version":3,"sources":["models/dtos/ger/jobInfo.ts","views/pages/ger/job/JobInfoSearchView.tsx"],"names":["CLASS_NAME","defaultSorted","dataField","order","OrderType","ASC","JobInfoSearchView","props","_useState","useState","_useState2","Object","slicedToArray","data","setData","getAllJobs","findAllJobs","errorFunction","mensagem","showToast","ERROR","thenFunction","result","useEffect","columns","editable","sort","text","enumColumn","JOB_ENUM_VALUES","react_default","a","createElement","summer_esm","title","hiddenHeader","Button","onClick","color","className","index_es","icon","removeFinishedJobs","assign","searchDataGridProps","addButtonProps","hideAddButton","remote","cellEdit","filter","pagination","search","dtoClassName","extraData","objectSpread2","getExtraData","hideCustomSearch","hideActionColumn"],"mappings":"8JAYO,MAAMA,EAAa,+ECO1B,MAAMC,EAAoC,CACxC,CACEC,UAAW,WACXC,MAAOC,IAAUC,MAkGNC,UA9FyCC,KAAS,MAAAC,EACvCC,mBAAS,IAD8BC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACxDK,EADwDH,EAAA,GAClDI,EADkDJ,EAAA,GAO/D,SAASK,IACPC,YAAY,CACVC,cAAeC,GAAYC,aAAUD,EAAUE,KAC/CC,aAAcC,GAAUR,EAAQQ,KAPpCC,oBAAU,KACRR,KACC,IAgBH,MAAMS,EAA0B,CAC9B,CACEtB,UAAW,WACXuB,UAAU,EACVC,MAAM,EACNC,KAAM,YAERC,aACE,CACE1B,UAAW,SACXyB,KAAM,kBAERE,KAEF,CACE3B,UAAW,WACXwB,MAAM,EACNC,KAAM,yBAER,CACEzB,UAAW,mBACXwB,MAAM,EACNC,KAAM,iCAER,CACEzB,UAAW,QACXwB,MAAM,EACNC,KAAM,wBAER,CACEzB,UAAW,UACXwB,MAAM,EACNC,KAAM,6BAER,CACEzB,UAAW,kBACXwB,MAAM,EACNC,KAAM,6CAIV,OACEG,EAAAC,EAAAC,cAACC,EAAA,GAAD,CAAiBC,MAAM,mCAA6BC,aAAc5B,EAAM4B,cACtEL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAQC,QAAStB,EAAYuB,MAAM,QAAQC,UAAU,aACnDT,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAiBC,KAAK,SADxB,cAIAX,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAQC,QAtDZ,WACEK,YAAmB,CACjBzB,cAAeC,GAAYC,aAAUD,EAAUE,KAC/CC,aAAc,IAAMN,OAmDSuB,MAAM,SAASC,UAAU,QACpDT,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAiBC,KAAK,UADxB,wBAGAX,EAAAC,EAAAC,cAACC,EAAA,EAADtB,OAAAgC,OAAA,GACMpC,EACAA,EAAMqC,oBAFZ,CAGEC,eAAgB,CACdC,eAAe,GAEjBC,OAAQ,CACNC,UAAU,EACVC,QAAQ,EACRC,YAAY,EACZC,QAAQ,EACRzB,MAAM,GAERF,QAASA,EACTX,KAAMA,EACNZ,cAAeA,EACfmD,aAAcpD,EACdqD,UAAS1C,OAAA2C,EAAA,EAAA3C,QAAA2C,EAAA,EAAA3C,CAAA,GAAO4C,aAAahD,EAAO,WAAYP,IAAvC,IAAoDwD,kBAAkB,EAAMC,kBAAkB","file":"static/js/530.0afe2c97.chunk.js","sourcesContent":["import { Basic } from 'summer';\r\n\r\nexport interface JobInfo extends Basic {\r\n  mensagem?: string;\r\n  dtInicio?: Date;\r\n  dtInicioExecucao?: Date;\r\n  dtFim?: Date;\r\n  duracao?: string;\r\n  duracaoExecucao?: string;\r\n  status?: string;\r\n}\r\n\r\nexport const CLASS_NAME = 'br.com.projetusinformatica.calima.ger.model.dto.jobinfo';\r\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React, { FC, useEffect, useState } from 'react';\r\nimport { Button } from 'reactstrap';\r\nimport {\r\n  ColumnsProps,\r\n  DefaultSortProps,\r\n  enumColumn,\r\n  ERROR,\r\n  getExtraData,\r\n  OrderType,\r\n  SearchDataGrid,\r\n  SearchViewProps,\r\n  showToast,\r\n  WindowComponent,\r\n} from 'summer';\r\nimport { CLASS_NAME, JobInfo } from '../../../../models/dtos/ger/jobInfo';\r\nimport { JOB_ENUM_VALUES } from '../../../../models/enumerated/ger/jobStatusEnum';\r\nimport { findAllJobs, removeFinishedJobs } from '../../../../services/ger.service';\r\n\r\nconst defaultSorted: DefaultSortProps[] = [\r\n  {\r\n    dataField: 'mensagem',\r\n    order: OrderType.ASC,\r\n  },\r\n];\r\n\r\nconst JobInfoSearchView: FC<SearchViewProps<JobInfo>> = props => {\r\n  const [data, setData] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getAllJobs();\r\n  }, []);\r\n\r\n  function getAllJobs() {\r\n    findAllJobs({\r\n      errorFunction: mensagem => showToast(mensagem, ERROR),\r\n      thenFunction: result => setData(result),\r\n    });\r\n  }\r\n\r\n  function removeJobs() {\r\n    removeFinishedJobs({\r\n      errorFunction: mensagem => showToast(mensagem, ERROR),\r\n      thenFunction: () => getAllJobs(),\r\n    });\r\n  }\r\n\r\n  const columns: ColumnsProps[] = [\r\n    {\r\n      dataField: 'mensagem',\r\n      editable: false,\r\n      sort: true,\r\n      text: 'Processo',\r\n    },\r\n    enumColumn(\r\n      {\r\n        dataField: 'status',\r\n        text: 'Situação',\r\n      },\r\n      JOB_ENUM_VALUES\r\n    ),\r\n    {\r\n      dataField: 'dtInicio',\r\n      sort: true,\r\n      text: 'Início do processo',\r\n    },\r\n    {\r\n      dataField: 'dtInicioExecucao',\r\n      sort: true,\r\n      text: 'Data inicio da execução',\r\n    },\r\n    {\r\n      dataField: 'dtFim',\r\n      sort: true,\r\n      text: 'Data fim do processo',\r\n    },\r\n    {\r\n      dataField: 'duracao',\r\n      sort: true,\r\n      text: 'Duração do processo',\r\n    },\r\n    {\r\n      dataField: 'duracaoExecucao',\r\n      sort: true,\r\n      text: 'Duração da execução processo',\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <WindowComponent title=\"Visualização dos Processos\" hiddenHeader={props.hiddenHeader}>\r\n      <Button onClick={getAllJobs} color=\"first\" className=\"mb-2 mr-2\">\r\n        <FontAwesomeIcon icon=\"sync\" /> Consultar\r\n      </Button>\r\n\r\n      <Button onClick={removeJobs} color=\"danger\" className=\"mb-2\">\r\n        <FontAwesomeIcon icon=\"times\" /> Remover Finalizados\r\n      </Button>\r\n      <SearchDataGrid\r\n        {...props}\r\n        {...props.searchDataGridProps}\r\n        addButtonProps={{\r\n          hideAddButton: true,\r\n        }}\r\n        remote={{\r\n          cellEdit: false,\r\n          filter: false,\r\n          pagination: false,\r\n          search: false,\r\n          sort: false,\r\n        }}\r\n        columns={columns}\r\n        data={data}\r\n        defaultSorted={defaultSorted}\r\n        dtoClassName={CLASS_NAME}\r\n        extraData={{ ...getExtraData(props, 'EditView', CLASS_NAME), hideCustomSearch: true, hideActionColumn: true }}\r\n      />\r\n    </WindowComponent>\r\n  );\r\n};\r\n\r\nexport default JobInfoSearchView;\r\n"],"sourceRoot":""}