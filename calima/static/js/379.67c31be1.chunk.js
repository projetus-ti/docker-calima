(window.webpackJsonp=window.webpackJsonp||[]).push([[379,536],{1122:function(e,a,t){"use strict";t.r(a);var n=t(6),r=t(12),l=t(14),c=t(0),o=t.n(c),s=t(201),i=t.n(s),m=t(98),u=t(19),b=t(22),d=t(44),f=t(395),E=t(198),p=t(148),g=t(786),O=t(2),j=t(815),h=t(826),R=t(830),F=t(258),N=t(1123),P=t(1118),C=t(1129);a.default=(e=>{const a=Object(u.c)(e=>e.globalReducer),t=a.globalParameter.empresa.id,s=Object(m.b)({defaultValues:{dtFinal:Object(O.Mb)(Object(O.jc)(a.globalParameter.empresaMCG.refFinal,0),O.t),dtInicial:Object(O.Mb)(Object(O.jc)(a.globalParameter.empresaMCG.refAtual,1),O.t),idGerEmpresa:t},mode:"onBlur"}),A=Object(c.useState)([]),V=Object(r.a)(A,2),y=V[0],v=V[1],I=Object(c.useState)(!1),x=Object(r.a)(I,2),L=x[0],M=x[1],D=Object(u.b)(),Y=[{dataField:"rowNumber",hidden:!0,text:"Row Number"},{dataField:"mensagem",formatter:(e,a)=>o.a.createElement("div",null,o.a.createElement(l.a,{icon:a.icon})," ",a.mensagem),style:(e,a)=>({color:a.color}),text:"Mensagens"},{dataField:"actions",formatter:(e,a)=>o.a.createElement(b.a,{id:"buttonEdit"+a.index,color:"neutral-secondary",onClick:()=>{"DebitoDiferenteCreditoDTO"===a.className||"PlanoContaDebitoIgualCreditoDTO"===a.className?S(a.idMcgLancamentoLote):"ConciliadoValorDiferenteDTO"===a.className?w(a.dtLancamento,a.planoConta):T(a.dtLancamento,a.planoConta)},className:"btn-pill d-30 p-0 align-top btn-animated-icon btn-animated-icon--secondary"},o.a.createElement("span",{className:"btn-wrapper--icon"},o.a.createElement(l.a,{color:O.j,icon:"pen"})),o.a.createElement(d.a,{target:"buttonEdit"+a.index,placement:"top"},a.conciliacaoBancaria?"Editar - Consulta Movimenta\xe7\xe3o":"Editar - Lan\xe7amento/Concilia\xe7\xe3o Banc\xe1ria",":")),headerAlign:()=>"center",headerStyle:()=>({width:"7%"}),style:(e,a)=>({color:"#f4772e",textAlign:"center"}),text:"A\xe7\xf5es"}],k=()=>{const e=W();if(e.length>0){const a={message:o.a.createElement(O.C,{erros:e}),type:O.f.WARNING};O.pb.emit(O.a.SHOW,a)}else Object(R.Ab)(s.getValues(),{errorFunction:e=>{Object(O.tc)(e,O.A)},thenFunction:e=>{v(e.map((e,a)=>Object(n.a)(Object(n.a)({},e),{},{index:a}))),M(!0)}})};Object(c.useEffect)(()=>{e.executeSearch&&k()},[]);const G=(a,t,n,r,l)=>{const c=a,i={dtLancamento:r,editItemProps:e.editItemProps,history:e.history,idMcgLancamentoLote:n,isFromVerifyError:t,location:e.location,match:e.match,planoConta:l,selectedItem:s.getValues()};D(F.a.showPage(o.a.createElement(c,i)))},S=e=>G(P.default,!0,e),w=(e,a)=>G(N.default,!0,null,e,a),T=(e,a)=>{G(C.default,!0,null,e,a)},W=()=>{const e=[];return-1===Object(O.ub)(s.getValues().dtFinal,s.getValues().dtInicial)&&e.push("Data Final n\xe3o pode ser menor que a Data Inicial"),e};return o.a.createElement(O.ib,{title:"Manuten\xe7\xe3o de Verificar Erros/Avisos",useGlobalParameter:!0,globalParameter:a.globalParameter,dependencies:[()=>Object(j.a)(a.globalParameter),()=>Object(h.a)(a.globalParameter)],wikiId:173},o.a.createElement(f.a,null,o.a.createElement(O.K,{formProps:s,id:"idGerEmpresa",hidden:!0}),o.a.createElement(E.a,null,o.a.createElement(p.a,{xs:3,className:"mt-3 ml-3"},o.a.createElement(E.a,null,o.a.createElement(O.K,{formProps:Object(n.a)(Object(n.a)({},s),{},{validation:{required:!0}}),id:"dtInicial",isPrependLabel:!0,labelWidth:120,label:"Data Inicial",placeholder:"Informe a data Inicial.",type:O.L.DATE})),o.a.createElement(E.a,null,o.a.createElement(O.K,{formProps:Object(n.a)(Object(n.a)({},s),{},{validation:{required:!0}}),id:"dtFinal",isPrependLabel:!0,labelWidth:120,label:"Data Final",placeholder:"Informe a data Final.",type:O.L.DATE})),o.a.createElement(E.a,null,o.a.createElement(g.a,{type:"switch",label:"Mostrar Avisos de Concilia\xe7\xe3o",name:"conciliacaoBancaria",id:"conciliacaoBancaria",innerRef:s.register}))),o.a.createElement(p.a,{xs:8,className:"ml-3"},o.a.createElement(O.g,{title:"Legenda"},o.a.createElement(E.a,null,o.a.createElement(p.a,null,o.a.createElement(l.a,{color:O.m,icon:"exclamation-triangle"})," D\xe9bito Difere do Cr\xe9dito"),o.a.createElement(p.a,null,o.a.createElement(l.a,{color:O.i,icon:"info"})," Conta Cr\xe9dito e D\xe9bito iguais")),o.a.createElement(E.a,null,o.a.createElement(p.a,null,o.a.createElement(l.a,{color:O.h,icon:"ban"})," Conta Caixa Com Saldo Credor"),o.a.createElement(p.a,null,o.a.createElement(l.a,{color:O.k,icon:"exclamation-circle"})," Lan\xe7amento Conciliado Com Valor Diferente"))))),o.a.createElement(E.a,{className:"mb-3"},o.a.createElement(p.a,null,o.a.createElement(b.a,{className:"ml-0",color:"primary",onClick:s.handleSubmit(k)},o.a.createElement(l.a,{icon:"sync"})," Consultar")),o.a.createElement(p.a,null,o.a.createElement(b.a,{className:"float-right",onClick:s.handleSubmit(()=>((a=!0)=>{Object(O.Cb)(e,e.history,a)})()),color:"danger"},o.a.createElement(l.a,{icon:"check-circle"})," Fechar"))),L&&o.a.createElement("div",null,y.length>0?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"table-area"},o.a.createElement(i.a,{bootstrap4:!0,bordered:!0,columns:Y,condensed:!0,className:"table-scroll",data:y,hover:!0,keyField:"index",noDataIndication:"Nenhum registro a ser exibido.",responsive:!0,striped:!0,tabIndexCell:!0})),o.a.createElement("div",{key:"divFotterKey",className:"text-left"},"Total de Registros: ",y.length)):o.a.createElement("div",{className:"alert d-flex align-items-center pl-2 align-content-center alert-success alert-dismissible fade show",role:"alert"},o.a.createElement("span",{className:"font-size-lg d-block d-40 mr-2 text-center"},o.a.createElement(l.a,{icon:"check-circle"})),o.a.createElement("span",null,o.a.createElement("strong",{className:"d-block"},"N\xe3o Existem Erros!")," Nossas buscas n\xe3o encontraram nenhum erro em seus lan\xe7amentos."," ",o.a.createElement(l.a,{icon:"smile"})),o.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))))})},1201:function(e,a,t){"use strict";t.r(a);var n=t(6),r=t(12),l=t(0),c=t.n(l),o=t(98),s=t(19),i=t(395),m=t(198),u=t(148),b=t(394),d=t(786),f=t(126),E=t(197),p=t(849),g=t(2),O=t(815),j=t(826),h=t(940),R=t(99),F=t(830),N=t(258),P=t(49),C=t(1122);let A=!1;a.default=(e=>{const a=Object(o.b)({mode:"onBlur"}),t=Object(o.b)({mode:"onBlur"}),V=Object(s.c)(e=>e.globalReducer),y=Object(l.useState)(!1),v=Object(r.a)(y,2),I=v[0],x=v[1],L=Object(s.b)(),M=V.globalParameter.empresaMCG.refAtual,D=V.globalParameter.usuario.id,Y=V.globalParameter.empresaMCG.emissaoLalur,k=V.globalParameter.perfil.permitirRestauracaoPeriodoFechado;function G(){const e=V.globalParameter.empresaMCG;if(!Object(g.Yb)(e)){const n=V.globalParameter.empresa.id;setTimeout(()=>{t.setValue("referenciaInicialEmpresa",M),t.setValue("referenciaFinalEmpresa",e.refFinal),t.setValue("fechamentoRestauracao","true"),a.setValue("refAtual",Object(g.hc)(Object(g.nb)(Object(g.jc)(M,1),1,"month"))),a.setValue("idGerEmpresa",n)},800)}}Object(l.useEffect)(()=>{G()},[V.globalParameter]);function S(){Object(R.a)({id:D},{thenFunction:e=>{L(Object(P.d)(e)),a.reset(),t.reset(),x(!1),setTimeout(()=>G(),500)}})}function w(){A&&Object(F.f)(a.getValues().idGerEmpresa,{errorFunction:e=>{Object(g.tc)(e,g.A)},thenFunction:e=>{A=!1}}),S()}function T(){L(g.nc.hideProgress())}function W(){L(g.nc.showProgress({animated:!0,className:"progress-bar-rounded progress-animated-alt",color:"first",label:"Aguarde processando...",striped:!0,value:100}))}function B(e){e.force=!1,W(),Object(F.ub)(a.getValues().idGerEmpresa,{errorFunction:e=>{Object(g.tc)(e,g.A),T()},thenFunction:a=>{a&&function(e){Object(F.r)(e,{errorFunction:e=>{Object(g.tc)(e,g.A),T()},thenFunction:a=>{if(T(),"PERIODO_ENCERRADO"===a.message){const a={message:"Existem contas de resultado encerradas no per\xedodo de ".concat("true"===t.getValues().fechamentoRestauracao?"Fechamento.":"Restaura\xe7\xe3o."," Realizar uma altera\xe7\xe3o nesta data ocasionar\xe1 a abertura das contas. Deseja continuar?"),onOkClick:()=>(function(e){e.force=!0,W(),Object(F.t)(e,{errorFunction:e=>{Object(g.tc)(e,g.A),T()},thenFunction:e=>{T(),w()}})})(e),type:g.f.WARNING_YES_NO};g.pb.emit(g.a.SHOW,a)}else{const e={message:"".concat("true"===t.getValues().fechamentoRestauracao?"Fechamento realizado":"Restaura\xe7\xe3o realizado"," com sucesso."),onOkClick:()=>w(),type:g.f.INFORMATION};g.pb.emit(g.a.SHOW,e)}}})}(e)}})}const K=()=>{const e=[];if("false"===t.getValues().fechamentoRestauracao&&(-1===Object(g.ub)(a.getValues().refFinal,a.getValues().refAtual,g.V)&&e.push("Refer\xeancia Atual n\xe3o pode ser maior que a Refer\xeancia Final"),0===Object(g.ub)(a.getValues().refAtual,M,g.V)&&e.push("A restaura\xe7\xe3o n\xe3o pode ser para um per\xedodo igual ou posterior ao atual.")),"true"===t.getValues().fechamentoRestauracao&&!Object(g.Yb)(a.getValues().refAtual)){const t="S\xf3 \xe9 permitido o fechamento para um per\xedodo fiscal imediatamente superior ao atual.",n=Number(Object(g.Mb)(Object(g.jc)(M,1),"YYYY")),r=Number(Object(g.Mb)(Object(g.jc)(a.getValues().refAtual,1),"YYYY"));if(Y===h.a.value)r!==n&&r!==n+1&&e.push(t);else if(Y===h.c.value){const l=q(M),c=q(a.getValues().refAtual);r===n?c!==l&&c!==l+1&&e.push(t):r<n&&e.push(t)}}return e};function q(e){switch(Number(e.substring(4,6))){case 1:case 2:case 3:return 1;case 4:case 5:case 6:return 2;case 7:case 8:case 9:return 3;case 10:case 11:case 12:return 4}}const z=()=>((t,n)=>{const r=t,l={editItemProps:e.editItemProps,executeSearch:n,history:e.history,location:e.location,match:e.match,selectedItem:a.getValues()};L(N.a.showPage(c.a.createElement(r,l)))})(C.default,!0);return c.a.createElement(g.ib,{title:"Fechamento/Restaura\xe7\xe3o",useGlobalParameter:!0,globalParameter:V.globalParameter,dependencies:[()=>Object(O.a)(V.globalParameter),()=>Object(j.a)(V.globalParameter)]},c.a.createElement(i.a,null,c.a.createElement(g.K,{formProps:a,id:"idGerEmpresa",hidden:!0}),c.a.createElement(m.a,null,c.a.createElement(u.a,null,c.a.createElement(g.K,{formProps:t,id:"referenciaInicialEmpresa",isPrependLabel:!0,label:"Refer\xeancia Atual",disabled:!0,type:g.L.REFERENCE})),c.a.createElement(u.a,null,c.a.createElement(g.K,{formProps:t,id:"referenciaFinalEmpresa",isPrependLabel:!0,label:"Refer\xeancia Final",disabled:!0,type:g.L.REFERENCE}))),c.a.createElement(b.a,{tag:m.a},c.a.createElement(u.a,null,c.a.createElement(d.a,{id:"fechamentoRestauracaoTrue",inline:!0,innerRef:t.register,label:"Fechamento",name:"fechamentoRestauracao",onChange:()=>{"true"===t.getValues().fechamentoRestauracao&&(x(!1),a.setValue("refAtual",Object(g.hc)(Object(g.nb)(Object(g.jc)(M,1),1,"month"))))},type:"radio",value:"true"}),c.a.createElement(d.a,{disabled:!k,id:"fechamentoRestauracaoFalse",inline:!0,innerRef:t.register,label:"Restaura\xe7\xe3o",name:"fechamentoRestauracao",onChange:()=>{if("false"===t.getValues().fechamentoRestauracao){x(!0);const e=Object(g.hc)(Object(g.nb)(Object(g.jc)(M,1),-1,"month"));a.reset(Object(n.a)(Object(n.a)({},a.getValues()),{},{refAtual:e,refFinal:e})),t.setValue("fechamentoRestauracao","false")}},type:"radio",value:"false"}))),c.a.createElement(f.a,{style:{marginBottom:"16px",borderWidth:"thin"}},c.a.createElement(E.a,null,c.a.createElement(p.a,null,"Informe a nova refer\xeancia de processamento"),c.a.createElement(m.a,null,c.a.createElement(u.a,null,c.a.createElement(g.K,{formProps:Object(n.a)(Object(n.a)({},a),{},{validation:{required:!0}}),id:"refAtual",isPrependLabel:!0,label:"Refer\xeancia Atual",type:g.L.REFERENCE}))),I?c.a.createElement(m.a,null,c.a.createElement(u.a,null,c.a.createElement(g.K,{formProps:Object(n.a)(Object(n.a)({},a),{},{validation:{required:!0}}),id:"refFinal",isPrependLabel:!0,label:"Refer\xeancia Final",type:g.L.REFERENCE}))):null)),c.a.createElement(g.R,{handleSubmit:a.handleSubmit(function(e){const n=K();if(n.length>0){const e={message:c.a.createElement(g.C,{erros:n}),type:g.f.WARNING};g.pb.emit(g.a.SHOW,e)}!function(){const e=Number(Object(g.Mb)(Object(g.jc)(a.getValues().refAtual,1),"YYYY")),n=Number(Object(g.Mb)(Object(g.jc)(M,1),"YYYY")),r=q(a.getValues().refAtual),l=q(M);"true"===t.getValues().fechamentoRestauracao&&(Y===h.a.value?e===n+1&&(A=!0):Y===h.c.value&&r===l+1&&(A=!0))}(),"true"===t.getValues().fechamentoRestauracao?function(e){const a={conciliacaoBancaria:!1,dtFinal:Object(g.Mb)(Object(g.jc)(M,0),g.t),dtInicial:Object(g.Mb)(Object(g.jc)(M,1),g.t),idGerEmpresa:e.idGerEmpresa};Object(F.Ab)(a,{errorFunction:e=>{Object(g.tc)(e,g.A)},thenFunction:a=>{if(a.length>0){const e={message:"Existem erros na Empresa corrente. Deseja Visualiz\xe1-los?",onOkClick:()=>z(),type:g.f.WARNING_YES_NO};g.pb.emit(g.a.SHOW,e)}else B(e)}})}(e):B(e)}),handleClose:()=>((a=!0)=>{Object(g.Cb)(e,e.history,a)})()})))})},849:function(e,a,t){"use strict";var n=t(3),r=t(9),l=t(0),c=t.n(l),o=t(1),s=t.n(o),i=t(8),m=t.n(i),u=t(5),b={tag:u.q,className:s.a.string,cssModule:s.a.object},d=function(e){var a=e.className,t=e.cssModule,l=e.tag,o=Object(r.a)(e,["className","cssModule","tag"]),s=Object(u.m)(m()(a,"card-title"),t);return c.a.createElement(l,Object(n.a)({},o,{className:s}))};d.propTypes=b,d.defaultProps={tag:"div"},a.a=d},940:function(e,a,t){"use strict";t.d(a,"a",function(){return n}),t.d(a,"c",function(){return r}),t.d(a,"b",function(){return l});const n={label:"Anual",value:"A"},r={label:"Trimestral",value:"T"},l=[n,r]}}]);
//# sourceMappingURL=379.67c31be1.chunk.js.map