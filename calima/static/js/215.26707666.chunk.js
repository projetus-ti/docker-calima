(window.webpackJsonp=window.webpackJsonp||[]).push([[215],{1426:function(e,a,t){"use strict";t.r(a);var n=t(6),r=t(0),c=t.n(r),s=t(98),i=t(20),o=t(395),l=t(198),u=t(148),d=t(126),m=t(197),b=t(849),f=t(786),p=t(2),E=t(815),O=t(823),j=t(868),g=t(168),F=t(893);a.default=(e=>{const a=Object(i.c)(e=>e.globalReducer),t=Object(s.b)({defaultValues:{entrada:!0,especies:[],saida:!0},mode:"onBlur"}),h=Object(i.b)();Object(r.useEffect)(()=>{Object(j.a)(a.globalParameter.empresaMLF.id,{errorFunction:e=>{Object(p.sc)(e,p.A)},thenFunction:e=>{if(!e){const e={message:"A empresa selecionada n\xe3o est\xe1 configurada para o EFD-Reinf. Acesse: M\xf3dulo Fiscal > Arquivo Digitais > Exporta\xe7\xe3o > EFD-Reinf > Enviar Lotes. Clique no bot\xe3o Configura\xe7\xf5es > Empresa e preencha as informa\xe7\xf5es necess\xe1rias.",type:p.f.WARNING};p.ob.emit(p.a.SHOW,e)}}}),a.globalParameter.empresa&&(P(),a.globalParameter.empresaMLF&&v())},[]);const P=()=>{const e=a.globalParameter,n=e.usuario,r=e.empresa.id;setTimeout(()=>{t.setValue("idEmpresa",r),t.setValue("idUsuario",n.id)},1e3)},v=()=>{const e=a.globalParameter.empresaMLF.referenciaAtual,n=Object(p.Mb)(Object(p.ic)(e,1)),r=Object(p.Mb)(Object(p.hc)(e));setTimeout(()=>{t.setValue("dtInicial",Object(p.tc)(n)),t.setValue("dtFinal",Object(p.tc)(r))},500)},I=e=>e.every(e=>!e),M=e=>{Object(j.g)(e,{errorFunction:e=>{Object(p.sc)(e,p.A)},thenFunction:()=>h(Object(g.c)())})};return c.a.createElement(p.hb,{title:"Refazer Lan\xe7amentos do EFD-REINF",useGlobalParameter:!0,globalParameter:a.globalParameter,dependencies:[()=>Object(E.a)(a.globalParameter),()=>Object(O.a)(a.globalParameter)]},c.a.createElement(o.a,null,c.a.createElement(p.K,{formProps:t,id:"idEmpresa",hidden:!0}),c.a.createElement(p.K,{formProps:t,id:"idUsuario",hidden:!0}),c.a.createElement(l.a,null,c.a.createElement(u.a,null,c.a.createElement(p.K,{formProps:Object(n.a)(Object(n.a)({},t),{},{validation:{required:!0}}),id:"dtInicial",label:"Data Inicial",placeholder:"Informe a Data Inicial do per\xedodo que deseja refazer os lan\xe7amentos",isPrependLabel:!0,type:p.L.DATE,onChange:()=>{if(t.getValues().dtInicial){const e=Object(p.tc)(String(t.getValues().dtInicial)),a=Object(p.hc)(Object(p.gc)(e));t.setValue("dtFinal",Object(p.tc)(Object(p.Mb)(a)))}else t.setValue("dtFinal",null)}})),c.a.createElement(u.a,null,c.a.createElement(p.K,{formProps:Object(n.a)(Object(n.a)({},t),{},{validation:{required:!0}}),id:"dtFinal",label:"Data Final",placeholder:"Informe a Data Final do per\xedodo que deseja refazer os lan\xe7amentos",isPrependLabel:!0,type:p.L.DATE}))),c.a.createElement(l.a,null,c.a.createElement(u.a,null,c.a.createElement(d.a,{style:{marginBottom:"16px"}},c.a.createElement(m.a,null,c.a.createElement(b.a,null,"Filtros Adicionais"),c.a.createElement(l.a,{className:"mb-3"},c.a.createElement(u.a,null,c.a.createElement(f.a,{type:"switch",label:"Notas de Entrada",name:"entrada",id:"entrada",innerRef:t.register})),c.a.createElement(u.a,null,c.a.createElement(f.a,{type:"switch",label:"Notas de Sa\xedda",name:"saida",id:"saida",innerRef:t.register}))),c.a.createElement(l.a,{className:"mb-3"},c.a.createElement(u.a,null,c.a.createElement(F.a,{formProps:t,id:"especies",isPrependLabel:!0,inputSearchProps:{selectProps:{isMulti:!0}}}))))))),c.a.createElement(l.a,null,c.a.createElement(u.a,null,c.a.createElement(p.R,{handleSubmit:t.handleSubmit(e=>{const a=(()=>{const e=[];return Object(p.tb)(Object(p.Mb)(t.getValues().dtInicial,p.t),Object(p.Mb)(t.getValues().dtFinal,p.t))>0&&e.push("Data Final n\xe3o pode ser menor que a Data Inicial."),I([t.getValues().entrada,t.getValues().saida])&&e.push("Pelo menos um tipo de nota deve ser selecionado."),e})();if(a.length>0){const e={message:c.a.createElement(p.C,{erros:a}),type:p.f.WARNING};p.ob.emit(p.a.SHOW,e)}else{const a={message:"Os lan\xe7amentos referentes ao EFD-Reinf dos itens de servi\xe7o ser\xe3o recalculados.\nDeseja continuar?",onOkClick:()=>M(e),type:p.f.WARNING_YES_NO};p.ob.emit(p.a.SHOW,a)}}),handleClose:()=>((a=!0)=>{Object(p.Bb)(e,e.history,a)})()})))))})},815:function(e,a,t){"use strict";function n(e){let a=null;return e.empresa||(a="Pelo menos uma empresa deve estar selecionada."),a}t.d(a,"a",function(){return n})},823:function(e,a,t){"use strict";function n(e){let a=null;return e.empresaMLF||(a="A empresa fiscal da empresa selecionada deve estar configurada. Para configurar acesse:\nM\xf3dulo Fiscal > Manuten\xe7\xe3o > Configura\xe7\xf5es > Empresa"),a}t.d(a,"a",function(){return n})},849:function(e,a,t){"use strict";var n=t(3),r=t(9),c=t(0),s=t.n(c),i=t(1),o=t.n(i),l=t(8),u=t.n(l),d=t(5),m={tag:d.q,className:o.a.string,cssModule:o.a.object},b=function(e){var a=e.className,t=e.cssModule,c=e.tag,i=Object(r.a)(e,["className","cssModule","tag"]),o=Object(d.m)(u()(a,"card-title"),t);return s.a.createElement(c,Object(n.a)({},i,{className:o}))};b.propTypes=m,b.defaultProps={tag:"div"},a.a=b},868:function(e,a,t){"use strict";t.d(a,"b",function(){return c}),t.d(a,"c",function(){return s}),t.d(a,"d",function(){return i}),t.d(a,"f",function(){return o}),t.d(a,"g",function(){return l}),t.d(a,"a",function(){return u}),t.d(a,"e",function(){return d}),t.d(a,"h",function(){return m});var n=t(2);function r(){return Object(n.vb)("/mlf")}function c(e,a,t){Object(n.rc)(r().post("/findEspecieByModelo",{modelo:e,isImportacao:a}),t)}function s(e,a){Object(n.rc)(r().get("/findReinfCFOPConfig/".concat(e)),a)}function i(e,a){Object(n.rc)(r().get("/getLivroFolhaMLF/".concat(e)),a)}function o(e,a){Object(n.rc)(r().post("/refazerLancamentosContabeis",e),a)}function l(e,a){Object(n.rc)(r().post("/refazerLancamentosReinf",e),a)}function u(e,a){Object(n.rc)(r().get("/findConfigReinfEmpresa/".concat(e)),a)}function d(e,a){Object(n.rc)(r().post("/importarIntegracaoFiscalContabil",e),a)}function m(e,a,t){Object(n.rc)(r().post("/validarIE",{inscricaoEstadual:e,unidadeFederacao:a}),t)}},876:function(e,a,t){"use strict";t.d(a,"a",function(){return n});const n="br.com.projetusinformatica.calima.ger.model.dto.especie"},893:function(e,a,t){"use strict";var n=t(6),r=t(0),c=t.n(r),s=t(2),i=t(876);a.a=(e=>c.a.createElement(s.K,Object.assign({},e,{isPrependLabel:!0,inputSearchProps:Object(n.a)(Object(n.a)({},e.inputSearchProps),{},{columns:[{dataField:"abreviacao",text:"Abrevia\xe7\xe3o"},{dataField:"descricao",text:"Descri\xe7\xe3o"}],dtoClassName:i.a,searchViewId:"EspecieSearchView"}),label:"Esp\xe9cie",placeholder:"Informe a Esp\xe9cie",type:s.L.INPUT_SEARCH})))}}]);
//# sourceMappingURL=215.26707666.chunk.js.map