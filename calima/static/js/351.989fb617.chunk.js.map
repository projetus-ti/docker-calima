{"version":3,"sources":["models/dtos/mlf/reinfCFOPConfig.ts","views/pages/mlf/reinfCFOP/ReinfCFOPEditView.tsx","models/dtos/ger/cfop.ts","views/components/ger/cfopIS/CFOPIS.tsx"],"names":["__webpack_require__","d","__webpack_exports__","CLASS_NAME","ReinfCFOPEditView","props","selectedItem","getSelectedItem","formProps","useForm","defaultValues","mode","propToolTip","messagem","message","placement","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","summer__WEBPACK_IMPORTED_MODULE_7__","title","wikiId","editViewProps","dtoClassName","validateExtras","formData","erros","cfop","digito","codigo","charAt","iniciaisCfopMI","agroindustriaMercadoExterno","produtorRuralMercadoExterno","push","indexOf","produtorRuralPAA","agroindustriaPAA","reactstrap__WEBPACK_IMPORTED_MODULE_3__","reactstrap__WEBPACK_IMPORTED_MODULE_4__","_components_ger_cfopIS_CFOPIS__WEBPACK_IMPORTED_MODULE_9__","Object","C_Program_Files_x86_Jenkins_workspace_Calima_react_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__","validation","required","id","isPrependLabel","label","labelWidth","placeholder","tipoMovimento","reactstrap__WEBPACK_IMPORTED_MODULE_5__","tag","Row","reactstrap__WEBPACK_IMPORTED_MODULE_6__","name","innerRef","register","type","withTooltip","CFOPIS","customInputSearchProps","inputSearchProps","columns","dataField","text","searchExpressions","expressions","_step","_iterator","C_Program_Files_x86_Jenkins_workspace_Calima_react_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__","s","n","done","tipo","value","alias","concat","fieldName","comparator","ComparatorEnum","LIKE","conditionalGroup","operation","ordered","err","e","f","searchViewId","react__WEBPACK_IMPORTED_MODULE_2___default","summer__WEBPACK_IMPORTED_MODULE_3__","assign","InputType","INPUT_SEARCH"],"mappings":"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","file":"static/js/351.989fb617.chunk.js","sourcesContent":["import { Basic } from 'summer';\r\nimport { Cfop } from '../ger/cfop';\r\n\r\nexport interface ReinfCFOPConfig extends Basic {\r\n  agroindustriaMercadoExterno?: boolean;\r\n  agroindustriaPAA?: boolean;\r\n  cfop?: Cfop;\r\n  produtorRuralMercadoExterno?: boolean;\r\n  produtorRuralPAA?: boolean;\r\n}\r\n\r\nexport const CLASS_NAME = 'br.com.projetusinformatica.calima.mlf.model.dto.reinfcfopconfig';\r\n","import React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { RouteComponentProps } from 'react-router';\r\nimport { Col, CustomInput, FormGroup, Row } from 'reactstrap';\r\nimport { EditForm, EditViewProps, getSelectedItem, InputTooltipProps, WindowComponent, withTooltip } from 'summer';\r\nimport { CLASS_NAME, ReinfCFOPConfig } from '../../../../models/dtos/mlf/reinfCFOPConfig';\r\nimport CFOPIS from '../../../components/ger/cfopIS/CFOPIS';\r\n\r\ninterface ReinfCFOPEditProps extends EditViewProps<ReinfCFOPConfig> {}\r\n\r\nconst ReinfCFOPEditView: React.FC<ReinfCFOPEditProps & RouteComponentProps> = props => {\r\n  const selectedItem = getSelectedItem(props);\r\n\r\n  const formProps = useForm<ReinfCFOPConfig>({ defaultValues: selectedItem, mode: 'onBlur' });\r\n\r\n  const defaultWidth: number = 100;\r\n\r\n  const propToolTip = (messagem: string): InputTooltipProps => {\r\n    return {\r\n      message: messagem,\r\n      placement: 'top-start',\r\n    };\r\n  };\r\n\r\n  const validateExtras = (formData: ReinfCFOPConfig): string[] => {\r\n    const erros = [];\r\n    if (formData.cfop) {\r\n      const digito = formData.cfop.codigo.charAt(0);\r\n\r\n      const iniciaisCfopMI = ['5', '6'];\r\n\r\n      if (digito !== '7' && (formData.agroindustriaMercadoExterno || formData.produtorRuralMercadoExterno)) {\r\n        erros.push(\"O CFOP selecionado não pode ser utilizado identificar comercializações para Mercado Externo. Somente os CFOP's iniciados em 7\");\r\n      }\r\n\r\n      if (iniciaisCfopMI.indexOf(digito) < 0 && (formData.produtorRuralPAA || formData.agroindustriaPAA)) {\r\n        erros.push(\r\n          \"O CFOP selecionado não pode ser utilizado identificar comercializações para Mercado Interno. Somente os CFOP's iniciados em 5 e 6\"\r\n        );\r\n      }\r\n    }\r\n    return erros;\r\n  };\r\n\r\n  return (\r\n    <WindowComponent title=\"EFD-Reinf - Configuração de C.F.O.P.\" wikiId={3666}>\r\n      <EditForm formProps={formProps} editViewProps={props} dtoClassName={CLASS_NAME} validateExtras={validateExtras}>\r\n        <Row>\r\n          <Col>\r\n            <CFOPIS\r\n              formProps={{ ...formProps, validation: { required: true } }}\r\n              id=\"cfop\"\r\n              isPrependLabel={true}\r\n              label=\"CFOP\"\r\n              labelWidth={defaultWidth}\r\n              placeholder=\"Informe o Código do CFOP\"\r\n              tipoMovimento={null}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <FormGroup tag={Row}>\r\n              <Col>\r\n                <CustomInput\r\n                  id=\"idprodutorRuralPAA\"\r\n                  label=\"Comercialização por Produtor Rural PJ\"\r\n                  name=\"produtorRuralPAA\"\r\n                  innerRef={formProps.register}\r\n                  type=\"switch\"\r\n                />\r\n                {withTooltip(\r\n                  propToolTip(\r\n                    'Se marcado, o Calima utilizará este C.F.O.P. para identificar a comercialização da produção rural realizadas por Produtores Rurais PJ.'\r\n                  ),\r\n                  'produtorRuralPAA'\r\n                )}\r\n              </Col>\r\n            </FormGroup>\r\n            <FormGroup tag={Row}>\r\n              <Col>\r\n                <CustomInput\r\n                  id=\"idprodutorRuralMercadoExterno\"\r\n                  label=\"Comercialização por Produtor Rural PJ para Mercado Externo\"\r\n                  name=\"produtorRuralMercadoExterno\"\r\n                  innerRef={formProps.register}\r\n                  type=\"switch\"\r\n                />\r\n                {withTooltip(\r\n                  propToolTip(\r\n                    'Se marcado, o Calima utilizará este C.F.O.P. para identificar a comercialização da produção rural realizadas por Produtores Rurais PJ.'\r\n                  ),\r\n                  'produtorRuralMercadoExterno'\r\n                )}\r\n              </Col>\r\n            </FormGroup>\r\n            <FormGroup tag={Row}>\r\n              <Col>\r\n                <CustomInput\r\n                  id=\"idagroindustriaPAA\"\r\n                  label=\"Comercialização por Agroindústria\"\r\n                  name=\"agroindustriaPAA\"\r\n                  innerRef={formProps.register}\r\n                  type=\"switch\"\r\n                />\r\n                {withTooltip(\r\n                  propToolTip(\r\n                    'Se marcado, o Calima utilizará este C.F.O.P. para identificar a comercialização da produção rural realizadas por Agroindústrias.'\r\n                  ),\r\n                  'agroindustriaPAA'\r\n                )}\r\n              </Col>\r\n            </FormGroup>\r\n\r\n            <FormGroup tag={Row}>\r\n              <Col>\r\n                <CustomInput\r\n                  id=\"idagroindustriaMercadoExterno\"\r\n                  label=\"Comercialização por Agroindústria para Mercado Externo\"\r\n                  name=\"agroindustriaMercadoExterno\"\r\n                  innerRef={formProps.register}\r\n                  type=\"switch\"\r\n                />\r\n                {withTooltip(\r\n                  propToolTip(\r\n                    'Se marcado, o Calima utilizará este C.F.O.P. para identificar a comercialização da produção rural para Mercado Externo realizadas por Agroindústrias.'\r\n                  ),\r\n                  'agroindustriaMercadoExterno'\r\n                )}\r\n              </Col>\r\n            </FormGroup>\r\n          </Col>\r\n        </Row>\r\n      </EditForm>\r\n    </WindowComponent>\r\n  );\r\n};\r\n\r\nexport default ReinfCFOPEditView;\r\n","import { Basic } from 'summer';\r\nimport { CfopMLF } from '../mlf/cfopMLF';\r\n\r\nexport interface Cfop extends Basic {\r\n  codigo?: string;\r\n  descricao?: string;\r\n  cfopMLF?: CfopMLF;\r\n}\r\n\r\nexport const CLASS_NAME = 'br.com.projetusinformatica.calima.ger.model.dto.cfop';\r\n","import React, { FC } from 'react';\r\nimport { ComparatorEnum, InputGroupInline, InputProps, InputType, SearchExpression } from 'summer';\r\nimport { InputSearchProps } from 'summer/dist/views/components/inputSearch/InputSearch';\r\nimport { CLASS_NAME } from '../../../../models/dtos/ger/cfop';\r\n\r\ninterface CfopIsProps extends InputProps {\r\n  tipoMovimento: any[];\r\n}\r\n\r\nconst CFOPIS: FC<CfopIsProps> = props => {\r\n  function searchExpressions(): SearchExpression[] {\r\n    const expressions: SearchExpression[] = [];\r\n\r\n    if (props.tipoMovimento) {\r\n      for (const tipo of props.tipoMovimento) {\r\n        const alias = `c${tipo}`;\r\n        const fieldName = 'codigo';\r\n        expressions.push({\r\n          alias,\r\n          comparator: ComparatorEnum.LIKE,\r\n          conditionalGroup: 'c_',\r\n          fieldName,\r\n          operation: `${fieldName} ${ComparatorEnum.LIKE} :${alias}`,\r\n          ordered: false,\r\n          value: `${tipo}%`,\r\n        });\r\n      }\r\n    }\r\n\r\n    return expressions;\r\n  }\r\n\r\n  const customInputSearchProps: InputSearchProps<any> = {\r\n    ...props.inputSearchProps,\r\n    columns: [\r\n      {\r\n        dataField: 'codigo',\r\n        text: 'Código',\r\n      },\r\n      {\r\n        dataField: 'descricao',\r\n        text: 'Descrição',\r\n      },\r\n    ],\r\n    dtoClassName: CLASS_NAME,\r\n    searchExpressions,\r\n    searchViewId: 'CFOPSearchView',\r\n  };\r\n\r\n  return (\r\n    <InputGroupInline\r\n      {...props}\r\n      inputSearchProps={customInputSearchProps}\r\n      isPrependLabel={true}\r\n      label={props.label ? props.label : 'CFOP'}\r\n      placeholder={props.placeholder ? props.placeholder : 'Informe o CFOP'}\r\n      type={InputType.INPUT_SEARCH}\r\n    />\r\n  );\r\n};\r\n\r\nexport default CFOPIS;\r\n"],"sourceRoot":""}