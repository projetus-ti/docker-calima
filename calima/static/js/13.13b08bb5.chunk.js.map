{"version":3,"sources":["models/enumerated/mfp/vinculoParamEnum.ts","models/enumerated/mfp/formaAcumuloFeriasEnum.ts","models/enumerated/mfp/formaDiasFeriasEnum.ts","views/pages/mfp/ferias/VinculoFeriasEditView.tsx","views/pages/mfp/ferias/FeriasEditView.tsx"],"names":["__webpack_require__","d","__webpack_exports__","VALIDAR_FERIAS_INTERCESSAO_AFASTAMENTOS","VINCULO_PARAM_ENUM_VALUES","label","value","FORMA_ACUMULO_FERIAS_ENUM_VALUES","FORMA_DIAS_FERIAS_ENUM_VALUES","VinculoFeriasEditView","props","globalReducer","useSelector","state","formProps","useForm","defaultValues","selectedItem","mode","_useState","useState","_useState2","Object","slicedToArray","isMP","setIsMP","_useState3","_useState4","disabledMP","setDisabledMP","_useState5","_useState6","disabledFaltas","setDisabledFaltas","_useState7","_useState8","disabledSalarioTrabalhado","setDisabledSalarioTrabalhado","_useState9","_useState10","canSave","setCanSave","_useState11","_useState12","perdeuPeriodoAquisitivo","setPerdeuPeriodoAquisitivo","_useState13","_useState14","ultimoDiaUtil","setUltimoDiaUtil","useEffect","setTimeout","register","name","isEmpty","id","mp927","programado","ajusteInicial","parentValues","parentFormProps","getValues","setValue","globalParameter","empresaMFP","diasConsideradosCalculoFerias","formaCalculoComissaoFerias","proximaFerias","dtInicialPerAquisitivo","dtFinalPerAquisitivo","checkPerdeuPeriodoFerias","values","perdeuPeriodoAquisitivoFerias","objectSpread2","vinculo","thenFunction","res","ajustarPeriodoAquisitivo","data","ajustarPeriodoAquisitivoFeriasPerdidoPorAfastamentos","promise","perdeuDireitoFerias","proximaDtInicialPerAquisitivo","proximaDtFinalPerAquisitivo","promisedAlert","AlertType","WARNING","message","then","_","handleSubmit","validateExtras","isFeriasNoMesmoMes","formData","item","refFeriasAtualDtInicialGozo","parseDateToRef","toDate","dtInicialGozo","refFeriasAtualDtFinalGozo","dtFinalGozo","refFeriasDtInicialGozo","refFeriasDtFinalGozo","dtInicialGozoNaMesmaRef","dtFinalGozoNaMesmaRef","formaDias","parentData","erros","compare","push","ferias","length","ultimoPeriodoAquisitivo","reduce","result","current","proximoPeriodo","formatDate","add","stop","diasGozo","parseInt","index","dtInicial","dtFinal","notEmptyA","dataDemissaoDeterminado","notEmptyB","recisao","dtAfastamento","dtPagamento","ultimoDiaUtilInterno","parseRefToDate","dtIniciaoGozo","validarDtGozo","forEach","dtIncialGozo","validarFeriasMesmaReferencia","react_default","a","createElement","summer_esm","obterDataFinalGozoFerias","ajustarDtFinalGozo","handleCancel","hideSubmitButton","condicional","Row","Col","className","style","color","CALIMA_DANGER","title","width","marginRight","validation","required","isPrependLabel","type","InputType","DATE","onBlur","incluirTercoFerias","onlyNumber","max","NUMBER","tooltipProps","inputDropDownProps","optionsProvider","DROP_DOWN","marginTop","labelProps","disabled","onChange","referencia","getDiaUtil","diaUtil","empresa","Label","salarioTrabalhado","faltas","CALIMA_WARNING","FeriasEditView","globalRecucer","dataVazia","proxDtFinalGozo","proxDtFinalPerAquisitivo","proxDtInicialGozo","proxDtInicialPerAquisitivo","ultDtFinalGozo","ultDtFinalPerAquisitivo","ultDtInicialGozo","ultDtInicialPerAquisitivo","dispatch","useDispatch","disableOptions","setDisableOptions","editFormRef","useRef","registrarListasVinculo","categoria","EMPREGADO_TRABALHADOR_INTERMITENTE","calculoProporcional","getFullVinculo","setInfoBox","ultimasFerias","proximasFerias","reset","onCancel","close","handleSimularFerias","showLoading","filter","efetivadaOutroSistema","temProximasFeriasProgramadas","isEmptyRecisao","dtAvisoPrevio","tipoDemissao","simularFerias","errorFunction","err","ERROR","indexOf","fileDownload","split","mensagem","progressActions","hideProgress","response","filename","headers","saveAs","feriasDefaultSortProps","dataField","order","OrderType","ASC","feriasFormProps","columns","formatter","cell","row","text","detailView","detailViewSize","detailViewWikiId","hideAddButton","hideEditButton","hideRemoveButton","onBeforeAdd","done","async","onBeforeEdit","onBeforeRemove","propName","wizardFinishProps","confirmButton","onConfirm","submit","periodPreview","beginField","endField","FormGroup","InputGroup","Input","innerRef","InputGroupAddon","addonType","marginLeft","getEditView","Fragment","Button","onClick","textAlign","assign","defaultSortDirection","defaultSorted","keyField","wrapBody","openViaDock","wikiId","ref","editViewProps","dtoClassName","CLASS_NAME","beforePersist","validarVinculoBeforePersist","content","ListGroup","variant","ListGroupItem","marginBottom","externalSubmit","onDockSubmit","handleClose","btnSubmitIcon","btnSubmitLabel","onAfterPageChange","currentPageId","loadVinculo","finishProps","VinculoIS"],"mappings":"4FAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAAH,EAAAC,EAAAC,EAAA,sBAAAE,IAAO,MAUMD,EAA0C,CACrDE,MAAO,wEACPC,MAAO,2CAGIF,EAA4B,CAfH,CACpCC,MAAO,iFACPC,MAAO,0BAEkC,CACzCD,MACE,0NAEFC,MAAO,+BAOsFH,+RCfxF,MAGMI,EAAmC,CAHd,CAAEF,MAAO,wBAAsBC,MAAO,sBACxC,CAAED,MAAO,sBAAoBC,MAAO,qBCEvDE,EAAgC,CAHlB,CAAEH,MAAO,UAAWC,MAAO,eAC1B,CAAED,MAAO,0BAAqBC,MAAO,yBCukBlDG,MAjiBoDC,IACjE,MAAMC,EAAgBC,YAAmCC,GAASA,EAAMF,eAClEG,EAAYC,YAAgB,CAAEC,cAAeN,EAAMO,cAAgB,GAAIC,KAAM,WAFTC,EAIlDC,oBAAS,GAJyCC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAInEK,EAJmEH,EAAA,GAI7DI,EAJ6DJ,EAAA,GAAAK,EAKtCN,oBAAS,GAL6BO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAKnEE,EALmED,EAAA,GAKvDE,EALuDF,EAAA,GAAAG,EAM9BV,oBAAS,GANqBW,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAMnEE,EANmED,EAAA,GAMnDE,EANmDF,EAAA,GAAAG,EAORd,oBAAS,GAPDe,EAAAb,OAAAC,EAAA,EAAAD,CAAAY,EAAA,GAOnEE,EAPmED,EAAA,GAOxCE,EAPwCF,EAAA,GAAAG,EAQ5ClB,oBAAS,GARmCmB,EAAAjB,OAAAC,EAAA,EAAAD,CAAAgB,EAAA,GAQnEE,EARmED,EAAA,GAQ1DE,EAR0DF,EAAA,GAAAG,EASZtB,oBAAS,GATGuB,EAAArB,OAAAC,EAAA,EAAAD,CAAAoB,EAAA,GASnEE,EATmED,EAAA,GAS1CE,EAT0CF,EAAA,GAAAG,EAUhC1B,mBAAS,MAVuB2B,EAAAzB,OAAAC,EAAA,EAAAD,CAAAwB,EAAA,GAUnEE,EAVmED,EAAA,GAUpDE,EAVoDF,EAAA,GAY1EG,oBACE,KACEC,WAAW,KACTrC,EAAUsC,SAAS,CAAEC,KAAM,eACvB3C,EAAMO,eAAiBqC,aAAQ5C,EAAMO,aAAasC,KACpD1B,GAAenB,EAAMO,aAAauC,OAClCf,EAAW/B,EAAMO,aAAawC,aAE9BC,KAED,MAGL,IAGF,MAAMA,EAAgB,KACpB,MAAMC,EAAejD,EAAMkD,gBAAgBC,YAE3C/C,EAAUgD,SAAS,cAAc,GACjChD,EAAUgD,SAAS,kBAAkB,GACrChD,EAAUgD,SAAS,UAAU,GAC7BhD,EAAUgD,SAAS,yBAAyB,GAC5ChD,EAAUgD,SAAS,YAAanD,EAAcoD,gBAAgBC,WAAWC,+BACzEnD,EAAUgD,SAAS,eAAgBnD,EAAcoD,gBAAgBC,WAAWE,4BAE5EjC,GAAkB,GAEbqB,aAAQK,EAAaQ,iBACxBrD,EAAUgD,SAAS,yBAA0BH,EAAaQ,cAAcC,wBACxEtD,EAAUgD,SAAS,uBAAwBH,EAAaQ,cAAcE,sBACtEC,MAIEA,EAA2B,KAC/B,MAAMC,EAASzD,EAAU+C,YACnBF,EAAe7C,EAAU+C,YAC1BP,aAAQiB,EAAOH,yBAA4Bd,aAAQiB,EAAOF,uBAA0Bf,aAAQK,EAAaJ,KAC5GiB,YAA8BlD,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,GACvBiD,GADsB,IACdG,QAAS,CAAEnB,GAAII,EAAaJ,MACzC,CACEoB,aAAcC,IACZ/B,EAA2B+B,OAoF/BC,EAA2BC,IAC/B,IAAKxB,aAAQwB,EAAKV,0BAA4Bd,aAAQwB,EAAKT,sBAAuB,CAChF,MAAMV,EAAejD,EAAMkD,gBAAgBC,YAC3CkB,YAAqDzD,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,GAC9CwD,GAD6C,IACvCJ,QAASf,IACpB,CACEgB,aAAcC,IACZ,IAAII,EAAU,KAEVJ,EAAIK,sBACNH,EAAKV,uBAAyBQ,EAAIM,8BAClCJ,EAAKT,qBAAuBO,EAAIO,4BAChCH,EAAUI,YACR,8IAEER,EAAIM,8BACJ,WACAN,EAAIO,4BACJ,IACFE,IAAUC,UAId,MAAMC,EACJ,6XAMAP,EADEA,EACQA,EAAQQ,KAAKC,GAAKL,YAAcG,EAASF,IAAUC,UAEnDF,YAAcG,EAASF,IAAUC,UAGrCE,KAAKC,GAAK/E,EAAMgF,aAAaZ,EAAMa,SA4H/CC,EAAqB,CAACC,EAAUC,KACpC,MAAMC,EAA8BC,aAAeC,aAAOJ,EAASK,gBAC7DC,EAA4BH,aAAeC,aAAOJ,EAASO,cAC3DC,EAAyBL,aAAeC,aAAOH,EAAKI,gBACpDI,EAAuBN,aAAeC,aAAOH,EAAKM,cAClDG,EAA0BR,IAAgCM,GAA0BN,IAAgCO,EACpHE,EAAwBL,IAA8BE,GAA0BF,IAA8BG,EAEpH,OAD2BT,EAASY,YAAcX,EAAKW,YACzBF,GAA2BC,IAGrDb,EAAiB,CAACE,EAAUJ,EAAGiB,KACnC,MAAMC,EAAQ,GAMd,GAJIC,aAAQf,EAASzB,uBAAwByB,EAASxB,uBAAyB,GAC7EsC,EAAME,KAAK,iGAGTH,EAAWI,OAAOC,OAAS,EAAG,CAChC,MAAMC,EAA0BN,EAAWI,OAAOG,OAAO,CAACC,EAAQC,IAChEP,aAAQM,EAAO7C,qBAAsB8C,EAAQ9C,sBAAwB,EAAI6C,EAASC,GAGpF,GAAIH,EAAyB,CAC3B,MAAMI,EAAiBC,aAAWC,aAAIrB,aAAOe,EAAwB3C,sBAAuB,EAAG,QAC3FuC,aAAQf,EAASzB,uBAAwBgD,IAAmB,GAC9DT,EAAME,KAAK,oDAAgDO,IAQjE,OAHAT,EAAME,QA9Ic,EAAChB,EAAUa,KAC/B,MAAMC,EAAQ,GAEd,IAAIY,GAAO,GAEPjE,aAAQuC,EAASK,gBAAkB5C,aAAQuC,EAAS2B,WAAaC,SAAS5B,EAAS2B,SAAU,KAAO,KACtGD,GAAO,IAGJA,IAAS1B,EAASrC,OAASoD,aAAQf,EAASK,cAAeL,EAASzB,wBAA0B,IACjGuC,EAAME,KAAK,6EACXU,GAAO,GAGT,IAAIG,EAAQ,EAEZ,KAAOA,EAAQhB,EAAWI,OAAOC,SAAmB,IAATQ,GAAgB,CACzD,MAAMzB,EAAOY,EAAWI,OAAOY,GAE/B,GAAI5B,EAAKvC,KAAOsC,EAAStC,GAAI,CAC3B,MAAMoE,EAAY7B,EAAKI,cACvB,IAAI0B,EAAU9B,EAAKM,YAEf9C,aAAQwC,EAAKM,eACfwB,EAAUP,aAAWC,aAAIrB,aAAO0B,GAAYF,SAAS3B,EAAK0B,SAAU,IAAM,EAAG,SAG/E3B,EAASO,YAAciB,aAAWC,aAAIrB,aAAOJ,EAASK,eAAgBuB,SAAS5B,EAAS2B,SAAU,IAAM,EAAG,QAEvGZ,aAAQf,EAASK,cAAeyB,IAAc,GAAKf,aAAQf,EAASK,cAAe0B,IAAY,IACjGjB,EAAME,KAAK,wDACXU,GAAO,IAGJA,GAAQX,aAAQf,EAASO,YAAauB,IAAc,GAAKf,aAAQf,EAASO,YAAawB,IAAY,IACtGjB,EAAME,KAAK,wDACXU,GAAO,IAGJA,GAAQX,aAAQf,EAASK,cAAeyB,GAAa,GAAKf,aAAQf,EAASO,YAAawB,GAAW,IACtGjB,EAAME,KAAK,wDACXU,GAAO,GAIX,MAAMM,GAAavE,aAAQoD,KAAgBpD,aAAQoD,EAAWoB,0BACzDP,GAAQM,GAAajB,aAAQf,EAAS+B,QAASlB,EAAWoB,yBAA2B,IACxFnB,EAAME,KAAK,4GACXU,GAAO,GAGT,MAAMQ,GAAazE,aAAQoD,KAAgBpD,aAAQoD,EAAWsB,WAAa1E,aAAQoD,EAAWsB,QAAQC,gBACjGV,GAAQQ,GAAanB,aAAQf,EAASO,YAAaM,EAAWsB,QAAQC,eAAiB,IAC1FtB,EAAME,KAAK,2EACXU,GAAO,GAGTG,IAGF,IAAKH,IAASjE,aAAQuC,EAASqC,aAC7B,GAAIrC,EAASrC,MAAO,CAClB,IAAI2E,EAAuBnF,EACE,OAAzBmF,IACFA,EAAuBC,aAAepC,aAAesB,aAAIrB,aAAOJ,EAASwC,eAAgB,EAAG,UAAW,IAE7C,IAAxDzB,aAAQf,EAASqC,YAAaC,IAChCxB,EAAME,KAAK,6GAEJD,aAAQS,aAAWC,aAAIrB,aAAOJ,EAASK,gBAAiB,EAAG,QAASL,EAASqC,aAAe,GACrGvB,EAAME,KAAK,gFAIf,OAAOF,GAoEO2B,CAAczC,EAAUa,IACtCC,EAAME,QAlE6B,EAAChB,EAAUa,KAC9C,MAAMC,EAAQ,GACd,IAAIY,GAAO,EA6BX,OA3BIjE,aAAQuC,EAASK,gBAAkB5C,aAAQuC,EAAS2B,WAAa3B,EAAS2B,UAAY,KACxFD,GAAO,GAGJA,GACHb,EAAWI,OAAOyB,QAAQzC,IACpBA,EAAKvC,KAAOsC,EAAStC,KACiC,IAApDqD,aAAQd,EAAKoC,YAAarC,EAASqC,cACrCvB,EAAME,KAAK,uFAETD,aAAQd,EAAKI,cAAeL,EAAS2C,eAAiB,GAAK5B,aAAQd,EAAKM,YAAaP,EAASK,gBAAkB,GAClHS,EAAME,KAAK,4EAETD,aAAQd,EAAKI,cAAeL,EAASO,cAAgB,GAAKQ,aAAQd,EAAKM,YAAaP,EAASO,cAAgB,GAC/GO,EAAME,KAAK,2EAETjB,EAAmBC,EAAUC,IAC/Ba,EAAME,KACJ,mRASHF,GAmCO8B,CAA6B5C,EAAUa,IAE9CC,GAGT,OACE+B,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEnD,aA5JiBZ,IACftC,GAtDqBsC,KACpBxB,aAAQwB,EAAKoB,gBAAmB5C,aAAQwB,EAAK0C,WAChDsB,YAAyBhE,EAAM,CAC7BH,aAAcC,IACZE,EAAKsB,YAAcxB,EACnBC,EAAyBC,OAkD7BiE,CAAmBjE,IA2JnBkE,aAActI,EAAMsI,aACpBlI,UAAWA,EACX6E,eAAgBA,EAChBsD,kBAAmBzG,GAElB0G,YACCtG,EACA8F,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAAA,MAAIS,UAAU,cAAcC,MAAO,CAAEC,MAAOC,MAA5C,qHAMNd,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAW/H,UAAWA,GACpB4H,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAeY,MAAM,iBACnBf,EAAAC,EAAAC,cAAA,OAAKS,UAAU,UACbX,EAAAC,EAAAC,cAAA,OAAKU,MAAO,CAAEI,MAAO,IAAKC,YAAa,KACrCjB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,yBACHlD,MAAM,wBACNS,UAASQ,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,GAAOR,GAAP,IAAkB8I,WAAY,CAAEC,UAAU,KACnDC,gBAAgB,EAChBC,KAAMC,IAAUC,KAChBC,OA/SiB,KACjC,MAAM3F,EAASzD,EAAU+C,YACzB/C,EAAUgD,SAAS,uBAAwBuD,aAAWC,aAAIA,aAAIrB,aAAO1B,EAAOH,wBAAyB,EAAG,SAAU,EAAG,SACrHE,QA+SYoE,EAAAC,EAAAC,cAAA,OAAKS,UAAU,eACbX,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,uBACHlD,MAAM,SACNS,UAASQ,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,GAAOR,GAAP,IAAkB8I,WAAY,CAAEC,UAAU,KACnDC,gBAAgB,EAChBC,KAAMC,IAAUC,KAChBC,OAnTe,KAC/B5F,SAsTUoE,EAAAC,EAAAC,cAAA,OAAKS,UAAU,UACbX,EAAAC,EAAAC,cAAA,OAAKU,MAAO,CAAEI,MAAO,IAAKC,YAAa,KACrCjB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,gBACHlD,MAAM,sBACNS,UAASQ,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,GAAOR,GAAP,IAAkB8I,WAAY,CAAEC,UAAU,KACnDC,gBAAgB,EAChBC,KAAMC,IAAUC,KAChBC,OA3TO,KACvB,MAAM3F,EAASzD,EAAU+C,YAErB+C,aAAQrC,EAAO2B,cAAe,cAAgB,GAChD3B,EAAOf,OAAQ,EACf1C,EAAUgD,SAAS,CAAC,CAAEN,OAAO,GAAS,CAAE2G,oBAAoB,KAC5DtI,GAAc,IAEdA,GAAc,GAGhBJ,EAAQ8C,EAAOf,OAEVe,EAAOf,OACV1C,EAAUgD,SAAS,cAAeuD,aAAWC,aAAIrB,aAAO1B,EAAO2B,gBAAiB,EAAG,aAgTzEwC,EAAAC,EAAAC,cAAA,OAAKS,UAAU,eACbX,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,WACHlD,MAAM,eACNS,UAASQ,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,GAAOR,GAAP,IAAkB8I,WAAWtI,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,CAAGuI,UAAU,GAASO,aAAW,EAAG,IAArC,IAAyCC,IAAK,OACnFP,gBAAgB,EAChBC,KAAMC,IAAUM,OAChBC,aAAc,CAAEhF,QAAS,6BAI/BmD,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,cACHlD,MAAM,gBACNS,UAASQ,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,GAAOR,GAAP,IAAkB8I,WAAY,CAAEC,UAAU,KACnDC,gBAAgB,EAChBC,KAAMC,IAAUC,SAItBvB,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,YACHlD,MAAM,iDACNS,UAASQ,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,GAAOR,GAAP,IAAkB8I,WAAY,CAAEC,UAAU,KACnDC,gBAAgB,EAChBU,mBAAoB,CAAEC,gBAAiBjK,GACvCuJ,KAAMC,IAAUU,cAItBhC,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,eACHlD,MAAM,gDACNS,UAASQ,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,GAAOR,GAAP,IAAkB8I,WAAY,CAAEC,UAAU,KACnDC,gBAAgB,EAChBU,mBAAoB,CAAEC,gBAAiBlK,GACvCwJ,KAAMC,IAAUU,cAItBhC,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAUtF,GAAG,wBAAwBzC,UAAWA,EAAWT,MAAM,0BAGrEqI,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAKG,MAAO,CAAEqB,UAAW,KACvBjC,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,QACHzC,UAAWA,EACXT,MAAM,kEACNuK,WAAY,CAAEtB,MAAO,CAAEC,MAAOC,MAC9Be,aAAc,CACZhF,QACE,kJAEJsF,SAAUjJ,EACVkJ,SA3VD,KACf,MAAMvG,EAASzD,EAAU+C,YAGzB,GAFApC,EAAQ8C,EAAOf,OAEXe,EAAOf,MAAO,CAChB,MAAMuH,EAAa/E,aAAesB,aAAIrB,aAAO1B,EAAO2B,eAAgB,EAAG,UACvE8E,YACE,CAAED,aAAYE,QAAS,EAAGC,QAASvK,EAAcoD,gBAAgBmH,SACjE,CACEvG,aAAcC,IACRA,IACF3B,EAAiB2B,GACjB9D,EAAUgD,SAAS,cAAec,YAM1C9D,EAAUgD,SAAS,CAAC,CAAEoE,YAAab,aAAWC,aAAIrB,aAAO1B,EAAO2B,gBAAiB,EAAG,UAAY,CAAEiE,oBAAoB,WA8UhHzB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAeY,MAAM,2BACnBf,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAUtF,GAAG,oBAAoBzC,UAAWA,EAAWT,MAAM,2BAGjEqI,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAKG,MAAO,CAAEqB,UAAW,KACvBjC,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAUtF,GAAG,iBAAiBzC,UAAWA,EAAWT,MAAM,4BAG9DqI,EAAAC,EAAAC,cAAA,OAAKS,UAAU,oBAAoBC,MAAO,CAAEqB,UAAW,KACrDjC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,sBACHlD,MAAM,sBACNS,UAAWA,EACXgJ,gBAAgB,EAChBC,KAAMC,IAAUM,SAElB5B,EAAAC,EAAAC,cAACuC,EAAA,EAAD,gBAEFzC,EAAAC,EAAAC,cAAA,OAAKS,UAAU,qBACbX,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,oBACHzC,UAAWA,EACXyJ,aAAc,CAAEhF,QAAS,0DACzBuF,SAlYgB,KAC9B,MAAMvG,EAASzD,EAAU+C,YACzBxB,GAA8BkC,EAAO6G,mBAChC7G,EAAO6G,mBACVtK,EAAUgD,SAAS,wBAAyB,SAgYlC4E,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,wBACHlD,MAAM,mBACNS,UAAWA,EACXgJ,gBAAgB,EAChBC,KAAMC,IAAUM,OAChBC,aAAc,CAAEhF,QAAS,0DACzBsF,SAAUzI,IAEZsG,EAAAC,EAAAC,cAACuC,EAAA,EAAD,gBAEFzC,EAAAC,EAAAC,cAAA,OAAKS,UAAU,qBACbX,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAUtF,GAAG,SAASzC,UAAWA,EAAWgK,SAxZhC,KACxB,MAAMvG,EAASzD,EAAU+C,YACzB5B,GAAmBsC,EAAO8G,QACrB9G,EAAO8G,QACVvK,EAAUgD,SAAS,aAAc,SAqZvB4E,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,aACHlD,MAAM,SACNS,UAAWA,EACXgJ,gBAAgB,EAChBC,KAAMC,IAAUM,OAChBC,aAAc,CAAEhF,QAAS,+DACzBsF,SAAU7I,IAEZ0G,EAAAC,EAAAC,cAACuC,EAAA,EAAD,gBAEDjC,YACC1H,EACAkH,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEtF,GAAG,qBACHzC,UAAWA,EACXT,MAAM,yBACNuK,WAAY,CAAEtB,MAAO,CAAEC,MAAOC,MAC9Be,aAAc,CACZhF,QACE,+SAUnB2D,aACE1G,EACDkG,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAAA,MAAIS,UAAU,cAAcC,MAAO,CAAEC,MAAO+B,MAA5C,8JCpKGC,UAnWuD7K,KACpE,MAAM8K,EAAgB5K,YAAmCC,GAASA,EAAMF,eAElE8K,EAAY,aACZ3K,EAAYC,YAAgC,CAChDC,cAAcM,OAAAmD,EAAA,EAAAnD,CAAA,CACZ4G,YAAauD,EACb3E,OAAQ,GACR4E,gBAAiBD,EACjBE,yBAA0BF,EAC1BG,kBAAmBH,EACnBI,2BAA4BJ,EAC5BK,eAAgBL,EAChBM,wBAAyBN,EACzBO,iBAAkBP,EAClBQ,0BAA2BR,GACxB/K,EAAMO,cAEXC,KAAM,WAGFgL,EAAWC,cArB4DhL,EAsBjCC,oBAAS,GAtBwBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAsBtEiL,EAtBsE/K,EAAA,GAsBtDgL,EAtBsDhL,EAAA,GAwBvEiL,EAAcC,mBAEpBrJ,oBACE,KACEC,WAAW,KACTqJ,YACE1L,EACA,CAAC,UACD,CAAC,YAAa,sBAAuB,gBAAiB,gBAAiB,aAAc,UAAW,0BAA2B,gBAE7HuL,EACE3L,EAAMO,eACHP,EAAMO,aAAawL,YAAcC,IAAmCpM,QAAoD,IAA3CI,EAAMO,aAAa0L,sBAGjGjM,EAAMO,cACR2L,YAAe9L,EAAWJ,EAAMO,aAAc4L,IAE/C,MAGL,IAGF,MAMMA,EAAanI,IACbA,EAAQoI,eACVhM,EAAUgD,SAAS,CACjB,CAAEiI,wBAAyBrH,EAAQoI,cAAc1I,wBACjD,CAAE0H,eAAgBpH,EAAQoI,cAAc1G,aACxC,CAAE4F,iBAAkBtH,EAAQoI,cAAc5G,eAC1C,CAAE+F,0BAA2BvH,EAAQoI,cAAczI,sBACnD,CAAE6D,YAAaxD,EAAQoI,cAAc5E,eAIrCxD,EAAQqI,gBACVjM,EAAUgD,SAAS,CACjB,CAAE4H,gBAAiBhH,EAAQqI,eAAe3G,aAC1C,CAAEuF,yBAA0BjH,EAAQqI,eAAe1I,sBACnD,CAAEuH,kBAAmBlH,EAAQqI,eAAe7G,eAC5C,CAAE2F,2BAA4BnH,EAAQqI,eAAe3I,2BAKrD4I,EAAQ,KACZlM,EAAUgD,SAAS,UAAW,OAG1BmJ,EAAW,KACfX,EAAYnF,QAAQ+F,SAgEhBC,EAAsB,KAC1BjB,EAASkB,eACTR,YAAe9L,EAAWJ,EAAMO,aAAcyD,IAC5C,GAnBiCmB,KACnC,IAAIqB,GAAS,EAYb,OAVIrB,EAASiB,OAAOC,OAAS,IAO3BG,EANerB,EAASiB,OAAOuG,OAC7BvH,GACEA,EAAKrC,aACJqC,EAAKwH,uBACN7F,SAAS+D,EAAczH,gBAAgBC,WAAW+G,WAAY,KAAOtD,SAASzB,aAAeC,aAAOH,EAAKI,gBAAiB,KAE9Ga,OAAS,GAGpBG,GAMDqG,CAA6B7I,GAAU,CACzC,MAAM8I,EAAiB,IACrBlK,aAAQoB,EAAQsD,QAAQC,gBAAkB3E,aAAQoB,EAAQsD,QAAQyF,gBAAkBnK,aAAQoB,EAAQsD,QAAQ0F,cAC1GhJ,EAAQsD,SAAWwF,MACrB9I,EAAQsD,QAAU,MAEpB2F,YAAcjJ,EAAS,CACrBkJ,cAAeC,GAAOzI,YAAcyI,EAAKxI,IAAUyI,OACnDnJ,aAAcC,IACRA,IAA8B,IAAvBA,EAAImJ,QAAQ,MACrBC,YAAapJ,EAAIqJ,MAAM,MAAM,GAAI,CAC/BL,cAAeM,IACbhC,EAASiC,KAAgBC,gBACzBhJ,YAAc8I,EAAU7I,IAAUyI,QAEpCnJ,aAAc0J,IACZnC,EAASiC,KAAgBC,gBACzB,MAAME,EAAWD,EAASE,QAAQ,uBAAuBN,MAAM,aAAa,GAC5EO,iBAAOH,EAASvJ,KAAMwJ,MAI1BlJ,YAAc,+BAA6BC,IAAUyI,eAK3D1I,YAAc,mEAA2DC,IAAUyI,UA+BnFW,EAA6C,CACjD,CACEC,UAAW,yBACXC,MAAOC,IAAUC,MAIfC,EAA0C,CAC9CC,QAAS,CACP,CACEL,UAAW,SACXM,UAbkB,CAACC,EAAMC,IAASA,EAAIzL,aAAeyL,EAAI5B,sBAAwB,aAAe,YAchG6B,KAAM,UAER,CACET,UAAW,gBACXS,KAAM,wBAER,CACET,UAAW,WACXS,KAAM,gBAER,CACET,UAAW,yBACXS,KAAM,wCAER,CACET,UAAW,uBACXS,KAAM,uCAGVC,WAAY3O,EACZ4O,eAAgB,QAChBC,iBAAkB,IAClBxO,YACAyO,cAAenD,EACfoD,eAAgBpD,EAChBqD,iBAAkBrD,EAClBsD,YAvJwBC,IACxB,MAAMpL,EAASzD,EAAU+C,YACzB,IAAImB,EAAU,KAcd,OAZIT,EAAOyD,SAAWzD,EAAOyD,QAAQC,cACnCjD,EAAUI,YAAc,sFACfb,EAAOuD,0BAChB9C,EAAUI,YAAc,0FAGtBJ,EACFA,EAAQQ,KAAK,IAAMmK,KAEnBA,IAGK,CAAEC,OAAO,IAwIhBC,aArIyB,CAACpK,EAAGkK,KACxBvD,GACHuD,IAEK,CAAEC,OAAO,IAkIhBE,eA/H2B,CAACjK,EAAU8J,KACtC,IAAKvD,EAAgB,CACnB,MAAM7H,EAASzD,EAAU+C,aACrBgC,EAASpC,YAAec,EAAOuI,eAAiBjH,EAAStC,KAAOgB,EAAOuI,cAAcvJ,KACvFoM,IAGJ,MAAO,CAAEC,OAAO,IAyHhBG,SAAU,SACVtG,MAAO,6BAGHuG,EAA6C,CACjDC,cAAe,CACb5P,MAAO,UAET4M,SAAU,KACRD,IACAC,KAEFiD,UAAW,KACT5D,EAAYnF,QAAQgJ,SAAS3K,KAAKwH,KAIhCoD,EAAgB,CAAC/P,EAAOgQ,EAAYC,IACxC5H,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAACuC,EAAA,EAAD,KAAQ9K,GACRqI,EAAAC,EAAAC,cAAC4H,EAAA,EAAD,KACE9H,EAAAC,EAAAC,cAAC6H,EAAA,EAAD,CAAO5F,UAAU,EAAMxH,KAAMgN,EAAYK,SAAU5P,EAAUsC,WAC7DsF,EAAAC,EAAAC,cAAC+H,EAAA,EAAD,CAAiBC,UAAU,UAAUtH,MAAO,CAAEuH,YAAa,IAA3D,UAGAnI,EAAAC,EAAAC,cAAC6H,EAAA,EAAD,CAAO5F,UAAU,EAAMxH,KAAMiN,EAAUI,SAAU5P,EAAUsC,aAK3D0N,EAAc,IAClBpI,EAAAC,EAAAC,cAAAF,EAAAC,EAAAoI,SAAA,KACErI,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,CAAKC,UAAU,cACbX,EAAAC,EAAAC,cAACoI,EAAA,EAAD,CAAQzH,MAAM,QAAQ0H,QAAS9D,GAA/B,uBAKJzE,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAKY,MAAM,wBACTf,EAAAC,EAAAC,cAAA,OAAKS,UAAU,6CACbX,EAAAC,EAAAC,cAAA,OAAKU,MAAO,CAAEI,MAAO,MACnBhB,EAAAC,EAAAC,cAAC2H,EAAA,EAAD,KACE7H,EAAAC,EAAAC,cAACuC,EAAA,EAAD,0BACAzC,EAAAC,EAAAC,cAAC6H,EAAA,EAAD,CAAO5F,UAAU,EAAMxH,KAAK,cAAcqN,SAAU5P,EAAUsC,SAAUkG,MAAO,CAAE4H,UAAW,eAIlGxI,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KAAMgH,EAAc,yBAAuB,4BAA6B,4BACxE1H,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KAAMgH,EAAc,cAAe,mBAAoB,oBAEzD1H,EAAAC,EAAAC,cAACO,EAAA,EAAD,CAAKG,MAAO,CAAEqB,UAAW,KACvBjC,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KAAMgH,EAAc,mBAAoB,6BAA8B,6BACtE1H,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KAAMgH,EAAc,oCAA+B,oBAAqB,wBAKhF1H,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACC,EAAA,EAADvH,OAAA6P,OAAA,GACMzQ,EADN,CAEE0Q,qBAAsBxC,IAAUC,IAChCwC,cAAe5C,GACXK,EAJN,CAKEwC,SAAS,iBAOnB,OACE5I,EAAAC,EAAAC,cAACC,EAAA,GAAD,CAAiBY,MAAM,gCAAuB8H,UAAgC,IAAtB7Q,EAAM8Q,YAAsBC,OAAQ,MAC1F/I,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACE6I,IAAKpF,EACLxL,UAAWA,EACX6Q,cAAejR,EACfkR,aAAcC,IACdC,cArJgB,CAACjM,EAAU8J,KAC/BoC,YAA4BlM,EAAU,CACpClB,aAAcC,IACPA,EAAIoN,UAAmF,IAAxEpN,EAAIoN,QAAQjE,QAAQ5N,IAAwCG,OAG9E8E,YACEsD,EAAAC,EAAAC,cAAAF,EAAAC,EAAAoI,SAAA,KACErI,EAAAC,EAAAC,cAAA,KAAGS,UAAU,QAAb,6DACAX,EAAAC,EAAAC,cAACqJ,EAAA,EAAD,CAAWC,QAAQ,SACjBxJ,EAAAC,EAAAC,cAACuJ,EAAA,EAAD,KAAgBhS,IAAwCE,QAE1DqI,EAAAC,EAAAC,cAAA,KAAGS,UAAU,mBAAmBC,MAAO,CAAEqB,UAAW,GAAIyH,aAAc,IAAtE,gEAIF5M,KAAK,IAAMmK,EAAK9J,IAZlB8J,EAAK9J,MAiBJ,CAAE+J,OAAO,IAiIZyC,gBAAgB,IAEO,IAAtB3R,EAAM8Q,YACL9I,EAAAC,EAAAC,cAAA,OAAKS,UAAU,OACZyH,IACDpI,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAYnD,aA3PM,KAC1B4G,EAAYnF,QAAQgJ,QAAO,GAAO3K,KAAKZ,IACrC0H,EAAYnF,QAAQ+F,QAChBxM,EAAM4R,cACR5R,EAAM4R,aAAa1N,MAuPgC2N,YAAatF,EAAUuF,cAAc,OAAOC,eAAe,YAG5G/J,EAAAC,EAAAC,cAACC,EAAA,GAAD,CAAQ/H,UAAWA,EAAW4R,kBAjSjBC,IACG,WAAlBA,GACFC,YAAY9R,EAAWoL,EAAUW,IA+RkCgG,YAAa7C,GAC1EtH,EAAAC,EAAAC,cAACC,EAAA,GAAD,CAAYtF,GAAG,UAAUkG,MAAM,+BAC7Bf,EAAAC,EAAAC,cAACO,EAAA,EAAD,KACET,EAAAC,EAAAC,cAACQ,EAAA,EAAD,KACEV,EAAAC,EAAAC,cAACkK,EAAA,EAAD,CAAWvP,GAAG,UAAUzC,UAASQ,OAAAmD,EAAA,EAAAnD,QAAAmD,EAAA,EAAAnD,CAAA,GAAOR,GAAP,IAAkB8I,WAAY,CAAEC,UAAU,KAAUxJ,MAAM,UAAUyJ,gBAAgB,OAI3HpB,EAAAC,EAAAC,cAACC,EAAA,GAAD,CAAYtF,GAAG,SAASkG,MAAM,kCAC3BqH","file":"static/js/13.13b08bb5.chunk.js","sourcesContent":["export const VALIDAR_SALARIO_MINIMO = {\r\n  label: 'O valor do salário informado é inferior ao salário mínimo vigente.',\r\n  value: 'VALIDAR_SALARIO_MINIMO',\r\n};\r\nexport const VALIDAR_VINCULO_RELACIONADO = {\r\n  label:\r\n    'A matrícula do vínculo de origem informado nos campos de transferência não foi encontrado em nenhuma das empresas ' +\r\n    'cadastras no sistema com o CNPJ/CPF informados, ou não corresponde a este trabalhador.',\r\n  value: 'VALIDAR_VINCULO_RELACIONADO',\r\n};\r\nexport const VALIDAR_FERIAS_INTERCESSAO_AFASTAMENTOS = {\r\n  label: 'O vínculo possui afastamento cruzando com período de férias.',\r\n  value: 'VALIDAR_FERIAS_INTERCESSAO_AFASTAMENTOS',\r\n};\r\n\r\nexport const VINCULO_PARAM_ENUM_VALUES = [VALIDAR_SALARIO_MINIMO, VALIDAR_VINCULO_RELACIONADO, VALIDAR_FERIAS_INTERCESSAO_AFASTAMENTOS];\r\n","export const PERIODO_AQUISITIVO = { label: 'Período Aquisitivo', value: 'PERIODO_AQUISITIVO' };\r\nexport const ULTIMOS_12_MESES = { label: 'Últimos 12 Meses', value: 'ULTIMOS_12_MESES' };\r\n\r\nexport const FORMA_ACUMULO_FERIAS_ENUM_VALUES = [PERIODO_AQUISITIVO, ULTIMOS_12_MESES];\r\n","export const MES_30_DIAS = { label: '30 Dias', value: 'MES_30_DIAS' };\r\nexport const NRO_DIAS_MES = { label: 'Nº de Dias do Mês', value: 'NRO_DIAS_MES' };\r\n\r\nexport const FORMA_DIAS_FERIAS_ENUM_VALUES = [MES_30_DIAS, NRO_DIAS_MES];\r\n","import React, { FC, useEffect, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useSelector } from 'react-redux';\r\nimport { Col, Label, Row } from 'reactstrap';\r\nimport {\r\n  Accordion,\r\n  AccordionItem,\r\n  add,\r\n  AlertType,\r\n  CALIMA_DANGER,\r\n  CALIMA_WARNING,\r\n  Checkbox,\r\n  compare,\r\n  DetailEditForm,\r\n  DetailEditViewFormProps,\r\n  formatDate,\r\n  InputGroupInline,\r\n  InputType,\r\n  isEmpty,\r\n  onlyNumber,\r\n  parseDateToRef,\r\n  parseRefToDate,\r\n  toDate,\r\n} from 'summer';\r\nimport { Ferias } from '../../../../models/dtos/mfp/ferias';\r\nimport { FORMA_ACUMULO_FERIAS_ENUM_VALUES } from '../../../../models/enumerated/mfp/formaAcumuloFeriasEnum';\r\nimport { FORMA_DIAS_FERIAS_ENUM_VALUES } from '../../../../models/enumerated/mfp/formaDiasFeriasEnum';\r\nimport {\r\n  ajustarPeriodoAquisitivoFeriasPerdidoPorAfastamentos,\r\n  getDiaUtil,\r\n  obterDataFinalGozoFerias,\r\n  perdeuPeriodoAquisitivoFerias,\r\n} from '../../../../services/mfp.service';\r\nimport { Reducers } from '../../../../store/ducks';\r\nimport { GlobalState } from '../../../../store/ducks/global.duck';\r\nimport { condicional, promisedAlert } from '../../../../utilities/vinculo.util';\r\n\r\nimport './VinculoFeriasEditView.css';\r\n\r\nconst VinculoFeriasEditView: FC<DetailEditViewFormProps<Ferias>> = props => {\r\n  const globalReducer = useSelector<Reducers, GlobalState>(state => state.globalReducer);\r\n  const formProps = useForm<Ferias>({ defaultValues: props.selectedItem || {}, mode: 'onBlur' });\r\n\r\n  const [isMP, setIsMP] = useState(false);\r\n  const [disabledMP, setDisabledMP] = useState(true);\r\n  const [disabledFaltas, setDisabledFaltas] = useState(true);\r\n  const [disabledSalarioTrabalhado, setDisabledSalarioTrabalhado] = useState(true);\r\n  const [canSave, setCanSave] = useState(true);\r\n  const [perdeuPeriodoAquisitivo, setPerdeuPeriodoAquisitivo] = useState(false);\r\n  const [ultimoDiaUtil, setUltimoDiaUtil] = useState(null);\r\n\r\n  useEffect(\r\n    () => {\r\n      setTimeout(() => {\r\n        formProps.register({ name: 'programado' });\r\n        if (props.selectedItem && !isEmpty(props.selectedItem.id)) {\r\n          setDisabledMP(!props.selectedItem.mp927);\r\n          setCanSave(props.selectedItem.programado);\r\n        } else {\r\n          ajusteInicial();\r\n        }\r\n      }, 700);\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    []\r\n  );\r\n\r\n  const ajusteInicial = () => {\r\n    const parentValues = props.parentFormProps.getValues();\r\n\r\n    formProps.setValue('programado', true);\r\n    formProps.setValue('salarioFamilia', true);\r\n    formProps.setValue('faltas', true);\r\n    formProps.setValue('efetivadaOutroSistema', false);\r\n    formProps.setValue('formaDias', globalReducer.globalParameter.empresaMFP.diasConsideradosCalculoFerias);\r\n    formProps.setValue('formaAcumulo', globalReducer.globalParameter.empresaMFP.formaCalculoComissaoFerias);\r\n\r\n    setDisabledFaltas(false);\r\n\r\n    if (!isEmpty(parentValues.proximaFerias)) {\r\n      formProps.setValue('dtInicialPerAquisitivo', parentValues.proximaFerias.dtInicialPerAquisitivo);\r\n      formProps.setValue('dtFinalPerAquisitivo', parentValues.proximaFerias.dtFinalPerAquisitivo);\r\n      checkPerdeuPeriodoFerias();\r\n    }\r\n  };\r\n\r\n  const checkPerdeuPeriodoFerias = () => {\r\n    const values = formProps.getValues();\r\n    const parentValues = formProps.getValues();\r\n    if (!isEmpty(values.dtInicialPerAquisitivo) && !isEmpty(values.dtFinalPerAquisitivo) && !isEmpty(parentValues.id)) {\r\n      perdeuPeriodoAquisitivoFerias(\r\n        { ...values, vinculo: { id: parentValues.id } },\r\n        {\r\n          thenFunction: res => {\r\n            setPerdeuPeriodoAquisitivo(res);\r\n          },\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const changePerAquisitivoInicial = () => {\r\n    const values = formProps.getValues();\r\n    formProps.setValue('dtFinalPerAquisitivo', formatDate(add(add(toDate(values.dtInicialPerAquisitivo), 1, 'year'), -1, 'day')));\r\n    checkPerdeuPeriodoFerias();\r\n  };\r\n\r\n  const changePerAquisitivoFinal = () => {\r\n    checkPerdeuPeriodoFerias();\r\n  };\r\n\r\n  const changeInicioGozo = () => {\r\n    const values = formProps.getValues();\r\n\r\n    if (compare(values.dtInicialGozo, '01/02/2020') < 0) {\r\n      values.mp927 = false;\r\n      formProps.setValue([{ mp927: false }, { incluirTercoFerias: true }]);\r\n      setDisabledMP(true);\r\n    } else {\r\n      setDisabledMP(false);\r\n    }\r\n\r\n    setIsMP(values.mp927);\r\n\r\n    if (!values.mp927) {\r\n      formProps.setValue('dtPagamento', formatDate(add(toDate(values.dtInicialGozo), -2, 'day')));\r\n    }\r\n  };\r\n\r\n  const changeComboFerias = () => {\r\n    const values = formProps.getValues();\r\n    setDisabledFaltas(!values.faltas);\r\n    if (!values.faltas) {\r\n      formProps.setValue('diasFaltas', null);\r\n    }\r\n  };\r\n\r\n  const changeSalarioTrabalhado = () => {\r\n    const values = formProps.getValues();\r\n    setDisabledSalarioTrabalhado(!values.salarioTrabalhado);\r\n    if (!values.salarioTrabalhado) {\r\n      formProps.setValue('diasSalarioTrabalhado', null);\r\n    }\r\n  };\r\n\r\n  const changeMP = () => {\r\n    const values = formProps.getValues();\r\n    setIsMP(values.mp927);\r\n\r\n    if (values.mp927) {\r\n      const referencia = parseDateToRef(add(toDate(values.dtInicialGozo), 1, 'month'));\r\n      getDiaUtil(\r\n        { referencia, diaUtil: 5, empresa: globalReducer.globalParameter.empresa },\r\n        {\r\n          thenFunction: res => {\r\n            if (res) {\r\n              setUltimoDiaUtil(res);\r\n              formProps.setValue('dtPagamento', res);\r\n            }\r\n          },\r\n        }\r\n      );\r\n    } else {\r\n      formProps.setValue([{ dtPagamento: formatDate(add(toDate(values.dtInicialGozo), -2, 'days')) }, { incluirTercoFerias: true }]);\r\n    }\r\n  };\r\n\r\n  const ajustarDtFinalGozo = data => {\r\n    if (!isEmpty(data.dtInicialGozo) && !isEmpty(data.diasGozo)) {\r\n      obterDataFinalGozoFerias(data, {\r\n        thenFunction: res => {\r\n          data.dtFinalGozo = res;\r\n          ajustarPeriodoAquisitivo(data);\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  const ajustarPeriodoAquisitivo = data => {\r\n    if (!isEmpty(data.dtInicialPerAquisitivo) && !isEmpty(data.dtFinalPerAquisitivo)) {\r\n      const parentValues = props.parentFormProps.getValues();\r\n      ajustarPeriodoAquisitivoFeriasPerdidoPorAfastamentos(\r\n        { ...data, vinculo: parentValues },\r\n        {\r\n          thenFunction: res => {\r\n            let promise = null;\r\n\r\n            if (res.perdeuDireitoFerias) {\r\n              data.dtInicialPerAquisitivo = res.proximaDtInicialPerAquisitivo;\r\n              data.dtFinalPerAquisitivo = res.proximaDtFinalPerAquisitivo;\r\n              promise = promisedAlert(\r\n                'Devido ao vínculo estar afastado por mais de 180 dias dentro do período aquisitivo informado, o mesmo foi ' +\r\n                  'ajustado para início em ' +\r\n                  res.proximaDtInicialPerAquisitivo +\r\n                  ' até ' +\r\n                  res.proximaDtFinalPerAquisitivo +\r\n                  '.',\r\n                AlertType.WARNING\r\n              );\r\n            }\r\n\r\n            const message =\r\n              'Ao incluir Férias para o trabalhador, é necessário que seja e enviado ao eSocial um afastamento temporário com o ' +\r\n              'motivo \"Gozo de férias ou recesso - Afastamento temporário para o gozo de férias ou recesso\". Para que o evento ' +\r\n              'seja enviado acesse: Módulo Folha de Pagamento > eSocial > Exportação > eSocial \"Selecione o evento ' +\r\n              '2230 para ser enviado\"';\r\n\r\n            if (promise) {\r\n              promise = promise.then(_ => promisedAlert(message, AlertType.WARNING));\r\n            } else {\r\n              promise = promisedAlert(message, AlertType.WARNING);\r\n            }\r\n\r\n            promise.then(_ => props.handleSubmit(data, validateExtras));\r\n          },\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleSubmit = data => {\r\n    if (canSave) {\r\n      ajustarDtFinalGozo(data);\r\n    }\r\n  };\r\n\r\n  const validarDtGozo = (formData, parentData) => {\r\n    const erros = [];\r\n\r\n    let stop = false;\r\n\r\n    if (isEmpty(formData.dtInicialGozo) || isEmpty(formData.diasGozo) || parseInt(formData.diasGozo, 10) <= 0) {\r\n      stop = true;\r\n    }\r\n\r\n    if (!stop && !formData.mp927 && compare(formData.dtInicialGozo, formData.dtInicialPerAquisitivo) < 0) {\r\n      erros.push('A data inicial de gozo deve ser posterior ao inicio do periodo aquisitivo');\r\n      stop = true;\r\n    }\r\n\r\n    let index = 0;\r\n\r\n    while (index < parentData.ferias.length && stop === false) {\r\n      const item = parentData.ferias[index];\r\n\r\n      if (item.id !== formData.id) {\r\n        const dtInicial = item.dtInicialGozo;\r\n        let dtFinal = item.dtFinalGozo;\r\n\r\n        if (isEmpty(item.dtFinalGozo)) {\r\n          dtFinal = formatDate(add(toDate(dtInicial), parseInt(item.diasGozo, 10) - 1, 'day'));\r\n        }\r\n\r\n        formData.dtFinalGozo = formatDate(add(toDate(formData.dtInicialGozo), parseInt(formData.diasGozo, 10) - 1, 'day'));\r\n\r\n        if (compare(formData.dtInicialGozo, dtInicial) >= 0 && compare(formData.dtInicialGozo, dtFinal) <= 0) {\r\n          erros.push('Já existe férias para esse período de gozo.');\r\n          stop = true;\r\n        }\r\n\r\n        if (!stop && compare(formData.dtFinalGozo, dtInicial) >= 0 && compare(formData.dtFinalGozo, dtFinal) <= 0) {\r\n          erros.push('Já existe férias para esse período de gozo.');\r\n          stop = true;\r\n        }\r\n\r\n        if (!stop && compare(formData.dtInicialGozo, dtInicial) < 0 && compare(formData.dtFinalGozo, dtFinal) > 0) {\r\n          erros.push('Já existe férias para esse período de gozo.');\r\n          stop = true;\r\n        }\r\n      }\r\n\r\n      const notEmptyA = !isEmpty(parentData) && !isEmpty(parentData.dataDemissaoDeterminado);\r\n      if (!stop && notEmptyA && compare(formData.dtFinal, parentData.dataDemissaoDeterminado) > 0) {\r\n        erros.push('Data de Término de Contrato com Prazo Determinado esta com valor anterior ao período de férias.');\r\n        stop = true;\r\n      }\r\n\r\n      const notEmptyB = !isEmpty(parentData) && !isEmpty(parentData.recisao) && !isEmpty(parentData.recisao.dtAfastamento);\r\n      if (!stop && notEmptyB && compare(formData.dtFinalGozo, parentData.recisao.dtAfastamento) > 0) {\r\n        erros.push('Data de Afastamento esta com valor anterior ao período de férias.');\r\n        stop = true;\r\n      }\r\n\r\n      index++;\r\n    }\r\n\r\n    if (!stop && !isEmpty(formData.dtPagamento)) {\r\n      if (formData.mp927) {\r\n        let ultimoDiaUtilInterno = ultimoDiaUtil;\r\n        if (ultimoDiaUtilInterno === null) {\r\n          ultimoDiaUtilInterno = parseRefToDate(parseDateToRef(add(toDate(formData.dtIniciaoGozo), 1, 'month')), 7);\r\n        }\r\n        if (compare(formData.dtPagamento, ultimoDiaUtilInterno) === 1) {\r\n          erros.push('Data de Pagamento deve ser até 5º dia útil data de início de gozo do mês subsequente.');\r\n        }\r\n      } else if (compare(formatDate(add(toDate(formData.dtInicialGozo), -2, 'day')), formData.dtPagamento) < 0) {\r\n        erros.push('Data de Pagamento deve ser até 2 dias antes da data de início de gozo.');\r\n      }\r\n    }\r\n\r\n    return erros;\r\n  };\r\n\r\n  const validarFeriasMesmaReferencia = (formData, parentData) => {\r\n    const erros = [];\r\n    let stop = false;\r\n\r\n    if (isEmpty(formData.dtInicialGozo) || isEmpty(formData.diasGozo) || formData.diasGozo <= 0) {\r\n      stop = true;\r\n    }\r\n\r\n    if (!stop) {\r\n      parentData.ferias.forEach(item => {\r\n        if (item.id !== formData.id) {\r\n          if (compare(item.dtPagamento, formData.dtPagamento) === 0) {\r\n            erros.push('Já existe uma ferias para este vínculo registrada com esta data de pagamento.');\r\n          }\r\n          if (compare(item.dtInicialGozo, formData.dtIncialGozo) <= 0 && compare(item.dtFinalGozo, formData.dtInicialGozo) >= 0) {\r\n            erros.push('A Data Inicio de Gozo está conflitante com outras férias marcadas.');\r\n          }\r\n          if (compare(item.dtInicialGozo, formData.dtFinalGozo) <= 0 && compare(item.dtFinalGozo, formData.dtFinalGozo) >= 0) {\r\n            erros.push('A Data Final de Gozo está conflitante com outras férias marcadas.');\r\n          }\r\n          if (isFeriasNoMesmoMes(formData, item)) {\r\n            erros.push(\r\n              'Duas férias com o campo <b>Dias considerados para cálculo de férias</b> diferentes dentro do mesmo mês não podem ser ' +\r\n                'calculadas, ambas precisam ter a <b>MESMA</b> forma de cálculo, ou seja, <b>30 Dias</b> ' +\r\n                'ou <b>Nº de Dias do Mês</b> igualmente.'\r\n            );\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    return erros;\r\n  };\r\n\r\n  const isFeriasNoMesmoMes = (formData, item) => {\r\n    const refFeriasAtualDtInicialGozo = parseDateToRef(toDate(formData.dtInicialGozo));\r\n    const refFeriasAtualDtFinalGozo = parseDateToRef(toDate(formData.dtFinalGozo));\r\n    const refFeriasDtInicialGozo = parseDateToRef(toDate(item.dtInicialGozo));\r\n    const refFeriasDtFinalGozo = parseDateToRef(toDate(item.dtFinalGozo));\r\n    const dtInicialGozoNaMesmaRef = refFeriasAtualDtInicialGozo === refFeriasDtInicialGozo || refFeriasAtualDtInicialGozo === refFeriasDtFinalGozo;\r\n    const dtFinalGozoNaMesmaRef = refFeriasAtualDtFinalGozo === refFeriasDtInicialGozo || refFeriasAtualDtFinalGozo === refFeriasDtFinalGozo;\r\n    const formaDiasDiferente = formData.formaDias !== item.formaDias;\r\n    return formaDiasDiferente && (dtInicialGozoNaMesmaRef || dtFinalGozoNaMesmaRef);\r\n  };\r\n\r\n  const validateExtras = (formData, _, parentData) => {\r\n    const erros = [];\r\n\r\n    if (compare(formData.dtInicialPerAquisitivo, formData.dtFinalPerAquisitivo) >= 0) {\r\n      erros.push('O Período aquisitivo inicial não pode ser maior ou igual ao Período aquisitivo final');\r\n    }\r\n\r\n    if (parentData.ferias.length > 0) {\r\n      const ultimoPeriodoAquisitivo = parentData.ferias.reduce((result, current) =>\r\n        compare(result.dtFinalPerAquisitivo, current.dtFinalPerAquisitivo) > 0 ? result : current\r\n      );\r\n\r\n      if (ultimoPeriodoAquisitivo) {\r\n        const proximoPeriodo = formatDate(add(toDate(ultimoPeriodoAquisitivo.dtFinalPerAquisitivo), 1, 'day'));\r\n        if (compare(formData.dtInicialPerAquisitivo, proximoPeriodo) <= 0) {\r\n          erros.push('O período aquisitivo atual deve começar em ' + proximoPeriodo);\r\n        }\r\n      }\r\n    }\r\n\r\n    erros.push(...validarDtGozo(formData, parentData));\r\n    erros.push(...validarFeriasMesmaReferencia(formData, parentData));\r\n\r\n    return erros;\r\n  };\r\n\r\n  return (\r\n    <DetailEditForm\r\n      handleSubmit={handleSubmit}\r\n      handleCancel={props.handleCancel}\r\n      formProps={formProps}\r\n      validateExtras={validateExtras}\r\n      hideSubmitButton={!canSave}\r\n    >\r\n      {condicional(\r\n        perdeuPeriodoAquisitivo,\r\n        <Row>\r\n          <Col>\r\n            <h6 className=\"text-center\" style={{ color: CALIMA_DANGER }}>\r\n              Há mais de 180 dias de afastamentos durante este período aquisitivo, o mesmo será ajustado ao salvar.\r\n            </h6>\r\n          </Col>\r\n        </Row>\r\n      )}\r\n      <Row>\r\n        <Col>\r\n          <Accordion formProps={formProps}>\r\n            <AccordionItem title=\"Parâmetros\">\r\n              <div className=\"d-flex\">\r\n                <div style={{ width: 410, marginRight: 20 }}>\r\n                  <InputGroupInline\r\n                    id=\"dtInicialPerAquisitivo\"\r\n                    label=\"Período Aquisitivo\"\r\n                    formProps={{ ...formProps, validation: { required: true } }}\r\n                    isPrependLabel={true}\r\n                    type={InputType.DATE}\r\n                    onBlur={changePerAquisitivoInicial}\r\n                  />\r\n                </div>\r\n                <div className=\"flex-grow-1\">\r\n                  <InputGroupInline\r\n                    id=\"dtFinalPerAquisitivo\"\r\n                    label=\"Até\"\r\n                    formProps={{ ...formProps, validation: { required: true } }}\r\n                    isPrependLabel={true}\r\n                    type={InputType.DATE}\r\n                    onBlur={changePerAquisitivoFinal}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex\">\r\n                <div style={{ width: 410, marginRight: 20 }}>\r\n                  <InputGroupInline\r\n                    id=\"dtInicialGozo\"\r\n                    label=\"Dt. Inicial de Gozo\"\r\n                    formProps={{ ...formProps, validation: { required: true } }}\r\n                    isPrependLabel={true}\r\n                    type={InputType.DATE}\r\n                    onBlur={changeInicioGozo}\r\n                  />\r\n                </div>\r\n                <div className=\"flex-grow-1\">\r\n                  <InputGroupInline\r\n                    id=\"diasGozo\"\r\n                    label=\"Dias de Gozo\"\r\n                    formProps={{ ...formProps, validation: { required: true, ...onlyNumber(0, 2), max: 31 } }}\r\n                    isPrependLabel={true}\r\n                    type={InputType.NUMBER}\r\n                    tooltipProps={{ message: 'Total de Dias de Gozo' }}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <Row>\r\n                <Col>\r\n                  <InputGroupInline\r\n                    id=\"dtPagamento\"\r\n                    label=\"Dt. Pagamento\"\r\n                    formProps={{ ...formProps, validation: { required: true } }}\r\n                    isPrependLabel={true}\r\n                    type={InputType.DATE}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col>\r\n                  <InputGroupInline\r\n                    id=\"formaDias\"\r\n                    label=\"Dias considerados para cálculo de férias\"\r\n                    formProps={{ ...formProps, validation: { required: true } }}\r\n                    isPrependLabel={true}\r\n                    inputDropDownProps={{ optionsProvider: FORMA_DIAS_FERIAS_ENUM_VALUES }}\r\n                    type={InputType.DROP_DOWN}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col>\r\n                  <InputGroupInline\r\n                    id=\"formaAcumulo\"\r\n                    label=\"Forma de acúmulo (maior remuneração)\"\r\n                    formProps={{ ...formProps, validation: { required: true } }}\r\n                    isPrependLabel={true}\r\n                    inputDropDownProps={{ optionsProvider: FORMA_ACUMULO_FERIAS_ENUM_VALUES }}\r\n                    type={InputType.DROP_DOWN}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n              <Row>\r\n                <Col>\r\n                  <Checkbox id=\"efetivadaOutroSistema\" formProps={formProps} label=\"Já foi efetivada\" />\r\n                </Col>\r\n              </Row>\r\n              <Row style={{ marginTop: 10 }}>\r\n                <Col>\r\n                  <Checkbox\r\n                    id=\"mp927\"\r\n                    formProps={formProps}\r\n                    label=\"Pgto até o 5º dia útil do mês subsequente (MPV-927)\"\r\n                    labelProps={{ style: { color: CALIMA_DANGER } }}\r\n                    tooltipProps={{\r\n                      message:\r\n                        'Essa opção proporciona liberar e identificar o pagamento das férias até o 5 dia útil do mês subsequente, referente a MPV-927',\r\n                    }}\r\n                    disabled={disabledMP}\r\n                    onChange={changeMP}\r\n                  />\r\n                </Col>\r\n              </Row>\r\n            </AccordionItem>\r\n            <AccordionItem title=\"Adicionar ao Cálculo\">\r\n              <Row>\r\n                <Col>\r\n                  <Checkbox id=\"primeiraParcela13\" formProps={formProps} label=\"1ª parcela 13º\" />\r\n                </Col>\r\n              </Row>\r\n              <Row style={{ marginTop: 15 }}>\r\n                <Col>\r\n                  <Checkbox id=\"salarioFamilia\" formProps={formProps} label=\"Salário família\" />\r\n                </Col>\r\n              </Row>\r\n              <div className=\"check-input-label\" style={{ marginTop: 15 }}>\r\n                <InputGroupInline\r\n                  id=\"diasAbonoPecuniario\"\r\n                  label=\"Abono Pecuniário\"\r\n                  formProps={formProps}\r\n                  isPrependLabel={true}\r\n                  type={InputType.NUMBER}\r\n                />\r\n                <Label>dia(s)</Label>\r\n              </div>\r\n              <div className=\"check-input-label\">\r\n                <Checkbox\r\n                  id=\"salarioTrabalhado\"\r\n                  formProps={formProps}\r\n                  tooltipProps={{ message: 'Número de dias trabalhados a receber nas férias.' }}\r\n                  onChange={changeSalarioTrabalhado}\r\n                />\r\n                <InputGroupInline\r\n                  id=\"diasSalarioTrabalhado\"\r\n                  label=\"Dias Trabalhados\"\r\n                  formProps={formProps}\r\n                  isPrependLabel={true}\r\n                  type={InputType.NUMBER}\r\n                  tooltipProps={{ message: 'Número de dias trabalhados a receber nas férias.' }}\r\n                  disabled={disabledSalarioTrabalhado}\r\n                />\r\n                <Label>dia(s)</Label>\r\n              </div>\r\n              <div className=\"check-input-label\">\r\n                <Checkbox id=\"faltas\" formProps={formProps} onChange={changeComboFerias} />\r\n                <InputGroupInline\r\n                  id=\"diasFaltas\"\r\n                  label=\"Faltas\"\r\n                  formProps={formProps}\r\n                  isPrependLabel={true}\r\n                  type={InputType.NUMBER}\r\n                  tooltipProps={{ message: 'Se nenhum valor for informado este campo será calculado.' }}\r\n                  disabled={disabledFaltas}\r\n                />\r\n                <Label>dia(s)</Label>\r\n              </div>\r\n              {condicional(\r\n                isMP,\r\n                <Row>\r\n                  <Col>\r\n                    <Checkbox\r\n                      id=\"incluirTercoFerias\"\r\n                      formProps={formProps}\r\n                      label=\"Pagar 1/3 de Férias\"\r\n                      labelProps={{ style: { color: CALIMA_DANGER } }}\r\n                      tooltipProps={{\r\n                        message:\r\n                          'Devido a MPV-927 torna-se opcional o pagamento referente ao 1/3 de Férias durante o período de calamidade pública. O sistema irá incluir automaticamente na folha de dezembro o pagamento do mesmo, pois deve ser pago até a data em que é devida a gratificação natalina.',\r\n                      }}\r\n                    />\r\n                  </Col>\r\n                </Row>\r\n              )}\r\n            </AccordionItem>\r\n          </Accordion>\r\n        </Col>\r\n      </Row>\r\n      {condicional(\r\n        !canSave,\r\n        <Row>\r\n          <Col>\r\n            <h6 className=\"text-center\" style={{ color: CALIMA_WARNING }}>\r\n              Férias com cálculos gerados não podem ser alteradas, para realizar ajustes remova o cálculo de férias da referência correspondente.\r\n            </h6>\r\n          </Col>\r\n        </Row>\r\n      )}\r\n    </DetailEditForm>\r\n  );\r\n};\r\n\r\nexport default VinculoFeriasEditView;\r\n","import { saveAs } from 'file-saver';\r\nimport React, { FC, useEffect, useRef, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RouteComponentProps } from 'react-router';\r\nimport { Button, Col, FormGroup, Input, InputGroup, InputGroupAddon, Label, ListGroup, ListGroupItem, Row } from 'reactstrap';\r\nimport {\r\n  AlertType,\r\n  Box,\r\n  DefaultSortProps,\r\n  DetailManagerForm,\r\n  DetailManagerFormProps,\r\n  EditForm,\r\n  EditFormRefProps,\r\n  EditViewProps,\r\n  isEmpty,\r\n  OrderType,\r\n  parseDateToRef,\r\n  ProcessBar,\r\n  progressActions,\r\n  toDate,\r\n  WindowComponent,\r\n  Wizard,\r\n  WizardActionFinishProps,\r\n  WizardPage,\r\n} from 'summer';\r\nimport { CLASS_NAME, Vinculo } from '../../../../models/dtos/mfp/vinculo';\r\nimport { EMPREGADO_TRABALHADOR_INTERMITENTE } from '../../../../models/enumerated/mfp/categoriaEnum';\r\nimport { VALIDAR_FERIAS_INTERCESSAO_AFASTAMENTOS } from '../../../../models/enumerated/mfp/vinculoParamEnum';\r\nimport { simularFerias, validarVinculoBeforePersist } from '../../../../services/mfp.service';\r\nimport { fileDownload } from '../../../../services/report.service';\r\nimport { Reducers } from '../../../../store/ducks';\r\nimport { GlobalState } from '../../../../store/ducks/global.duck';\r\nimport { getFullVinculo, loadVinculo, promisedAlert, registrarListasVinculo, showLoading } from '../../../../utilities/vinculo.util';\r\nimport VinculoIS from '../../../components/mfp/vinculoIS/VinculoIS';\r\nimport VinculoFeriasEditView from './VinculoFeriasEditView';\r\n\r\ninterface FeriasEditViewProps extends EditViewProps<Vinculo> {\r\n  onDockSubmit?: (data: any) => void;\r\n  openViaDock?: boolean;\r\n  selectedItem?: any;\r\n}\r\n\r\ninterface ScreenFields {\r\n  vinculo?: Vinculo;\r\n  ultDtInicialPerAquisitivo?: string;\r\n  ultDtFinalPerAquisitivo?: string;\r\n  ultDtInicialGozo?: string;\r\n  ultDtFinalGozo?: string;\r\n  proxDtInicialPerAquisitivo?: string;\r\n  proxDtFinalPerAquisitivo?: string;\r\n  proxDtInicialGozo?: string;\r\n  proxDtFinalGozo?: string;\r\n}\r\n\r\nconst FeriasEditView: FC<FeriasEditViewProps & RouteComponentProps> = props => {\r\n  const globalRecucer = useSelector<Reducers, GlobalState>(state => state.globalReducer);\r\n\r\n  const dataVazia = '__/__/____';\r\n  const formProps = useForm<Vinculo & ScreenFields>({\r\n    defaultValues: {\r\n      dtPagamento: dataVazia,\r\n      ferias: [],\r\n      proxDtFinalGozo: dataVazia,\r\n      proxDtFinalPerAquisitivo: dataVazia,\r\n      proxDtInicialGozo: dataVazia,\r\n      proxDtInicialPerAquisitivo: dataVazia,\r\n      ultDtFinalGozo: dataVazia,\r\n      ultDtFinalPerAquisitivo: dataVazia,\r\n      ultDtInicialGozo: dataVazia,\r\n      ultDtInicialPerAquisitivo: dataVazia,\r\n      ...props.selectedItem,\r\n    },\r\n    mode: 'onBlur',\r\n  });\r\n\r\n  const dispatch = useDispatch();\r\n  const [disableOptions, setDisableOptions] = useState(false);\r\n\r\n  const editFormRef = useRef<EditFormRefProps>();\r\n\r\n  useEffect(\r\n    () => {\r\n      setTimeout(() => {\r\n        registrarListasVinculo(\r\n          formProps,\r\n          ['ferias'],\r\n          ['categoria', 'calculoProporcional', 'proximaFerias', 'ultimasFerias', 'empresaMFP', 'recisao', 'dataDemissaoDeterminado', 'trabalhador']\r\n        );\r\n        setDisableOptions(\r\n          props.selectedItem &&\r\n            (props.selectedItem.categoria === EMPREGADO_TRABALHADOR_INTERMITENTE.value || props.selectedItem.calculoProporcional === true)\r\n        );\r\n\r\n        if (props.selectedItem) {\r\n          getFullVinculo(formProps, props.selectedItem, setInfoBox);\r\n        }\r\n      }, 700);\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    []\r\n  );\r\n\r\n  const onPageChange = currentPageId => {\r\n    if (currentPageId === 'ferias') {\r\n      loadVinculo(formProps, dispatch, setInfoBox);\r\n    }\r\n  };\r\n\r\n  const setInfoBox = vinculo => {\r\n    if (vinculo.ultimasFerias) {\r\n      formProps.setValue([\r\n        { ultDtFinalPerAquisitivo: vinculo.ultimasFerias.dtInicialPerAquisitivo },\r\n        { ultDtFinalGozo: vinculo.ultimasFerias.dtFinalGozo },\r\n        { ultDtInicialGozo: vinculo.ultimasFerias.dtInicialGozo },\r\n        { ultDtInicialPerAquisitivo: vinculo.ultimasFerias.dtFinalPerAquisitivo },\r\n        { dtPagamento: vinculo.ultimasFerias.dtPagamento },\r\n      ]);\r\n    }\r\n\r\n    if (vinculo.proximasFerias) {\r\n      formProps.setValue([\r\n        { proxDtFinalGozo: vinculo.proximasFerias.dtFinalGozo },\r\n        { proxDtFinalPerAquisitivo: vinculo.proximasFerias.dtFinalPerAquisitivo },\r\n        { proxDtInicialGozo: vinculo.proximasFerias.dtInicialGozo },\r\n        { proxDtInicialPerAquisitivo: vinculo.proximasFerias.dtInicialPerAquisitivo },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const reset = () => {\r\n    formProps.setValue('vinculo', null);\r\n  };\r\n\r\n  const onCancel = () => {\r\n    editFormRef.current.close();\r\n  };\r\n\r\n  const handleSubmitViaDock = () => {\r\n    editFormRef.current.submit(false).then(res => {\r\n      editFormRef.current.close();\r\n      if (props.onDockSubmit) {\r\n        props.onDockSubmit(res);\r\n      }\r\n    });\r\n  };\r\n\r\n  const validateBeforeAdd = done => {\r\n    const values = formProps.getValues();\r\n    let promise = null;\r\n\r\n    if (values.recisao && values.recisao.dtAfastamento) {\r\n      promise = promisedAlert('O vínculo já possui uma rescisão lançada no sistema. Deseja continuar?');\r\n    } else if (values.dataDemissaoDeterminado) {\r\n      promise = promisedAlert('O vínculo possui uma data de demissão determinada no sistema. Deseja continuar?');\r\n    }\r\n\r\n    if (promise) {\r\n      promise.then(() => done());\r\n    } else {\r\n      done();\r\n    }\r\n\r\n    return { async: true };\r\n  };\r\n\r\n  const validateBeforeEdit = (_, done) => {\r\n    if (!disableOptions) {\r\n      done();\r\n    }\r\n    return { async: true };\r\n  };\r\n\r\n  const validateBeforeRemove = (formData, done) => {\r\n    if (!disableOptions) {\r\n      const values = formProps.getValues();\r\n      if (formData.programado || (values.ultimasFerias && formData.id === values.ultimasFerias.id)) {\r\n        done();\r\n      }\r\n    }\r\n    return { async: true };\r\n  };\r\n\r\n  const temProximasFeriasProgramadas = formData => {\r\n    let result = false;\r\n\r\n    if (formData.ferias.length > 0) {\r\n      const ferias = formData.ferias.filter(\r\n        item =>\r\n          item.programado &&\r\n          !item.efetivadaOutroSistema &&\r\n          parseInt(globalRecucer.globalParameter.empresaMFP.referencia, 10) <= parseInt(parseDateToRef(toDate(item.dtInicialGozo)), 10)\r\n      );\r\n      result = ferias.length > 0;\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  const handleSimularFerias = () => {\r\n    dispatch(showLoading());\r\n    getFullVinculo(formProps, props.selectedItem, vinculo => {\r\n      if (temProximasFeriasProgramadas(vinculo)) {\r\n        const isEmptyRecisao = () =>\r\n          isEmpty(vinculo.recisao.dtAfastamento) && isEmpty(vinculo.recisao.dtAvisoPrevio) && isEmpty(vinculo.recisao.tipoDemissao);\r\n        if (vinculo.recisao && isEmptyRecisao()) {\r\n          vinculo.recisao = null;\r\n        }\r\n        simularFerias(vinculo, {\r\n          errorFunction: err => promisedAlert(err, AlertType.ERROR),\r\n          thenFunction: res => {\r\n            if (res && res.indexOf('P<') !== -1) {\r\n              fileDownload(res.split('P<')[1], {\r\n                errorFunction: mensagem => {\r\n                  dispatch(progressActions.hideProgress());\r\n                  promisedAlert(mensagem, AlertType.ERROR);\r\n                },\r\n                thenFunction: response => {\r\n                  dispatch(progressActions.hideProgress());\r\n                  const filename = response.headers['content-disposition'].split('filename=')[1];\r\n                  saveAs(response.data, filename);\r\n                },\r\n              });\r\n            } else {\r\n              promisedAlert('Erro ao simular as férias', AlertType.ERROR);\r\n            }\r\n          },\r\n        });\r\n      } else {\r\n        promisedAlert('É necessário ter férias programadas para poder simular.', AlertType.ERROR);\r\n      }\r\n    });\r\n  };\r\n\r\n  const beforePersist = (formData, done) => {\r\n    validarVinculoBeforePersist(formData, {\r\n      thenFunction: res => {\r\n        if (!res.content || res.content.indexOf(VALIDAR_FERIAS_INTERCESSAO_AFASTAMENTOS.value) === -1) {\r\n          done(formData);\r\n        } else {\r\n          promisedAlert(\r\n            <>\r\n              <p className=\"lead\">Existem informações que exigem a sua atenção:</p>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroupItem>{VALIDAR_FERIAS_INTERCESSAO_AFASTAMENTOS.label}</ListGroupItem>\r\n              </ListGroup>\r\n              <p className=\"lead text-center\" style={{ marginTop: 16, marginBottom: 0 }}>\r\n                Deseja ignorar essas advertências e salvar mesmo assim?\r\n              </p>\r\n            </>\r\n          ).then(() => done(formData));\r\n        }\r\n      },\r\n    });\r\n\r\n    return { async: true };\r\n  };\r\n\r\n  const statusFormatter = (cell, row) => (row.programado && !row.efetivadaOutroSistema ? 'Programada' : 'Efetivada');\r\n\r\n  const feriasDefaultSortProps: DefaultSortProps[] = [\r\n    {\r\n      dataField: 'dtInicialPerAquisitivo',\r\n      order: OrderType.ASC,\r\n    },\r\n  ];\r\n\r\n  const feriasFormProps: DetailManagerFormProps = {\r\n    columns: [\r\n      {\r\n        dataField: 'status',\r\n        formatter: statusFormatter,\r\n        text: 'Status',\r\n      },\r\n      {\r\n        dataField: 'dtInicialGozo',\r\n        text: 'Data Inicial de Gozo',\r\n      },\r\n      {\r\n        dataField: 'diasGozo',\r\n        text: 'Dias de Gozo',\r\n      },\r\n      {\r\n        dataField: 'dtInicialPerAquisitivo',\r\n        text: 'Dt. Inicial do Período Aquisitivo',\r\n      },\r\n      {\r\n        dataField: 'dtFinalPerAquisitivo',\r\n        text: 'Dt. Final do Período Aquisitivo',\r\n      },\r\n    ],\r\n    detailView: VinculoFeriasEditView,\r\n    detailViewSize: 'large',\r\n    detailViewWikiId: 672,\r\n    formProps,\r\n    hideAddButton: disableOptions,\r\n    hideEditButton: disableOptions,\r\n    hideRemoveButton: disableOptions,\r\n    onBeforeAdd: validateBeforeAdd,\r\n    onBeforeEdit: validateBeforeEdit,\r\n    onBeforeRemove: validateBeforeRemove,\r\n    propName: 'ferias',\r\n    title: 'Histórico de Férias',\r\n  };\r\n\r\n  const wizardFinishProps: WizardActionFinishProps = {\r\n    confirmButton: {\r\n      label: 'Salvar',\r\n    },\r\n    onCancel: () => {\r\n      reset();\r\n      onCancel();\r\n    },\r\n    onConfirm: () => {\r\n      editFormRef.current.submit().then(reset);\r\n    },\r\n  };\r\n\r\n  const periodPreview = (label, beginField, endField) => (\r\n    <FormGroup>\r\n      <Label>{label}</Label>\r\n      <InputGroup>\r\n        <Input disabled={true} name={beginField} innerRef={formProps.register} />\r\n        <InputGroupAddon addonType=\"prepend\" style={{ marginLeft: -1 }}>\r\n          até\r\n        </InputGroupAddon>\r\n        <Input disabled={true} name={endField} innerRef={formProps.register} />\r\n      </InputGroup>\r\n    </FormGroup>\r\n  );\r\n\r\n  const getEditView = () => (\r\n    <>\r\n      <Row>\r\n        <Col className=\"text-right\">\r\n          <Button color=\"first\" onClick={handleSimularFerias}>\r\n            Simular Férias\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <Box title=\"Últimas Férias\">\r\n            <div className=\"d-flex justify-content-center text-center\">\r\n              <div style={{ width: 220 }}>\r\n                <FormGroup>\r\n                  <Label>Data do pagamento</Label>\r\n                  <Input disabled={true} name=\"dtPagamento\" innerRef={formProps.register} style={{ textAlign: 'center' }} />\r\n                </FormGroup>\r\n              </div>\r\n            </div>\r\n            <Row>\r\n              <Col>{periodPreview('Período aquisitivo:', 'ultDtInicialPerAquisitivo', 'ultDtFinalPerAquisitivo')}</Col>\r\n              <Col>{periodPreview('Gozadas em:', 'ultDtInicialGozo', 'ultDtFinalGozo')}</Col>\r\n            </Row>\r\n            <Row style={{ marginTop: 10 }}>\r\n              <Col>{periodPreview('Programada para:', 'proxDtInicialPerAquisitivo', 'proxDtFinalPerAquisitivo')}</Col>\r\n              <Col>{periodPreview('Próximo período aquisitivo:', 'proxDtInicialGozo', 'proxDtFinalGozo')}</Col>\r\n            </Row>\r\n          </Box>\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <DetailManagerForm\r\n            {...props}\r\n            defaultSortDirection={OrderType.ASC}\r\n            defaultSorted={feriasDefaultSortProps}\r\n            {...feriasFormProps}\r\n            keyField=\"rowIndex\"\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <WindowComponent title=\"Manutenção de Férias\" wrapBody={props.openViaDock === true} wikiId={1736}>\r\n      <EditForm\r\n        ref={editFormRef}\r\n        formProps={formProps}\r\n        editViewProps={props}\r\n        dtoClassName={CLASS_NAME}\r\n        beforePersist={beforePersist}\r\n        externalSubmit={true}\r\n      >\r\n        {props.openViaDock === true ? (\r\n          <div className=\"m-3\">\r\n            {getEditView()}\r\n            <ProcessBar handleSubmit={handleSubmitViaDock} handleClose={onCancel} btnSubmitIcon=\"save\" btnSubmitLabel=\"Salvar\" />\r\n          </div>\r\n        ) : (\r\n          <Wizard formProps={formProps} onAfterPageChange={onPageChange} finishProps={wizardFinishProps}>\r\n            <WizardPage id=\"vinculo\" title=\"Seleção do vínculo\">\r\n              <Row>\r\n                <Col>\r\n                  <VinculoIS id=\"vinculo\" formProps={{ ...formProps, validation: { required: true } }} label=\"Vinculo\" isPrependLabel={true} />\r\n                </Col>\r\n              </Row>\r\n            </WizardPage>\r\n            <WizardPage id=\"ferias\" title=\"Programação de Férias\">\r\n              {getEditView()}\r\n            </WizardPage>\r\n          </Wizard>\r\n        )}\r\n      </EditForm>\r\n    </WindowComponent>\r\n  );\r\n};\r\n\r\nexport default FeriasEditView;\r\n"],"sourceRoot":""}