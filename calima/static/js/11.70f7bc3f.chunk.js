(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1140:function(e,a,t){"use strict";t.r(a);var l=t(6),n=t(0),o=t.n(n),r=t(98),i=t(20),c=t(35),s=t(198),d=t(148),u=t(2),m=t(847);const b="br.com.projetusinformatica.calima.mfp.model.dto.vinculoevento",p={value:"ATIVOS",label:"Ativos"},v={value:"VENCIDOS",label:"Vencidos"},E={value:"FUTUROS",label:"Futuros"},f={value:"TODOS",label:"Todos"},O=[p,v,E,f];var P=t(883),j=t(984),F=t(853),g=t(865),h=t(840),C=t(832),I=t(13),R=t(831);const A={value:"[13]",label:"Primeira Parcela 13\xba",extraFields:{intValue:13}},V={value:"[17]",label:"Adiantamento",extraFields:{intValue:17}},D={value:"[29]",label:"Arredondamento",extraFields:{intValue:29}},L={value:"[51]",label:"Base FGTS",extraFields:{intValue:51}},S={value:"[52]",label:"Base IRRF",extraFields:{intValue:52}},T={value:"[55]",label:"FGTS",extraFields:{intValue:55}},x={value:"[56]",label:"Faixa IRRF",extraFields:{intValue:56}},M={value:"[72]",label:"IR R.F.",extraFields:{intValue:72}},N={value:"[243]",label:"Pens\xe3o 13\xba Sal\xe1rio",extraFields:{intValue:243}},w=[V,D,S,x,M],K=[A,D,L,T,N],y={label:"Normal",value:"NORMAL"};var k=t(907);var _=e=>{const a=Object(i.c)(e=>e.globalReducer),t=Object(r.b)({defaultValues:Object(l.a)({origem:y.value},e.selectedItem||{}),mode:"onBlur"}),c=Object(n.useState)("VALOR"),m=Object(I.a)(c,2),b=m[0],p=m[1],v=Object(n.useState)(!0),E=Object(I.a)(v,2),f=E[0],O=E[1],F=Object(n.useState)(!0),C=Object(I.a)(F,2),A=C[0],V=C[1],D=Object(n.useState)(!1),L=Object(I.a)(D,2),S=L[0],T=L[1];Object(n.useEffect)(()=>{t.register({name:"origem"}),t.register({name:"vinculo"});const l=a.globalParameter.empresaMFP.referencia;if(t.setValue("referenciaMFP",l),e.selectedItem&&!Object(u.Xb)(e.selectedItem.id))V(!1),M(e.selectedItem.evento);else{const a=e.parentFormProps.getValues();t.setValue([{vinculo:a.vinculo},{tipoCalculo:a.tipoCalculo},{dataInicial:Object(u.Mb)(Object(u.ic)(l,1))},{dataFinal:Object(u.Mb)(Object(u.hc)(l))},{somenteEstaReferencia:!0}])}},[]);const x=e=>{let a=null;const t=a=>-1!==e.toLowerCase().indexOf(a);return t("<horas>")?a="HORAS":t("<dias>")?a="DIAS":t("<valor>")&&(a="VALOR"),a},M=e=>{e&&e.formula&&(t.setValue([{eventoFormula:e.formula},{eventoTipo:g.a.find(j.b,e.tipo).label}]),p(x(e.formula)||"VALOR"),N(),(e=>{const a=g.a.contains(j.a,e);T(a),t.setValue("principal",!a)})(e.tipo))},N=()=>{const e=t.getValues(),a=!e.valorManual&&(!e.evento||!x(e.evento.formula));O(a)};return o.a.createElement(u.v,{handleSubmit:(a,l)=>{const n=t.getValues().vinculo;Object(u.tb)(a.dataInicial,n.dataAdmissao)<0?(a.dataInicial=n.dataAdmissao,Object(u.tb)(a.dataFinal,a.dataInicial)<0&&(a.dataFinal=a.dataInicial),t.setValue([{dataInicial:a.dataInicial},{dataFinal:a.dataFinal}]),Object(h.o)("A Data Inicial foi alterada para a Data de Admiss\xe3o. Deseja gravar?").then(()=>{e.handleSubmit(a,l)})):e.handleSubmit(a,l)},handleCancel:e.handleCancel,formProps:t,validateExtras:(e,a,t)=>{const l=[];let n=!0;return Object(u.Xb)(e.dataInicial)&&(n=!1),n&&(!Object(u.Xb)(e.dataFinal)&&Object(u.tb)(e.dataFinal,e.dataInicial)<0&&l.push("A Dt. Inicial n\xe3o pode ser maior do que a Dt. Final."),t.vinculo.ferias.filter(a=>Object(u.tb)(a.dtInicialGozo,e.dataInicial)<=0&&Object(u.tb)(a.dtFinalGozo,e.dataInicial)>=0).length>0&&Object(h.o)("Trabalhador em per\xedodo de F\xe9rias.",u.f.WARNING),e.tipoCalculo&&!Object(u.Xb)(e.evento)&&(e.tipoCalculo!==P.a.value||g.a.contains(w,e.evento.codigo,"intValue")||l.push("Somente os seguintes eventos s\xe3o permit\xeddos no c\xe1lculo do tipo Adiantamento:\n"+w.map(e=>e.label).join("\n")),e.tipoCalculo!==P.c.value||g.a.contains(K,e.evento.codigo,"intValue")||l.push("Somente os seguintes eventos s\xe3o permit\xeddos na 1\xaa Parcela do 13\xba:\n"+K.map(e=>e.label).join("\n")),g.a.contains([P.g,P.h,P.j,P.i],e.tipoCalculo)&&e.evento.insideSalarioComposto&&l.push("Eventos que incidem sal\xe1rio composto n\xe3o pode ser lan\xe7ados na rescis\xe3o pois j\xe1 integram parte do saldo sal\xe1rio")),t.vinculo.categoria===R.f.value&&299===e.evento.codigo&&l.push("O lan\xe7amento do evento 299 - Indeniza\xe7\xe3o antecipada sobre o saldo FGTS (Multa 20% - Contrato Verde Amarelo), s\xf3 \xe9 permitido para a categoria 108 - Empregado - Contrato de trabalho Verde e Amarelo - com acordo para antecipa\xe7\xe3o mensal da multa rescis\xf3ria do FGTS")),l}},S&&o.a.createElement(s.a,null,o.a.createElement(d.a,{style:{color:u.h,textAlign:"center"}},o.a.createElement("h4",null,"ATEN\xc7\xc3O"),o.a.createElement("p",null,"Os eventos informativos n\xe3o s\xe3o exibidos no contra cheque."))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"tipoCalculo",label:"Tipo de C\xe1lculo",formProps:t,isPrependLabel:!0,inputDropDownProps:{optionsProvider:P.k},type:u.L.DROP_DOWN,placeholder:"Selecione o Tipo de C\xe1lculo"}))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(k.a,{id:"evento",formProps:Object(l.a)(Object(l.a)({},t),{},{validation:{required:!0}}),label:"Evento",isPrependLabel:!0,onChange:M}))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"eventoFormula",label:"F\xf3rmula",formProps:t,isPrependLabel:!0,disabled:!0})),o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"eventoTipo",label:"Tipo",formProps:t,isPrependLabel:!0,disabled:!0}))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.g,{title:"Periodicidade"},o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"referenciaMFP",label:"Refer\xeancia atual",formProps:t,isPrependLabel:!0,disabled:!0}))),o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",{style:{width:325,marginTop:10}},o.a.createElement(u.n,{id:"somenteEstaReferencia",formProps:t,label:"Somente esta refer\xeancia",onChange:()=>{const e=t.getValues(),l=a.globalParameter.empresaMFP.referencia;V(e.somenteEstaReferencia),t.setValue([{dataInicial:e.somenteEstaReferencia?Object(u.Mb)(Object(u.ic)(l,1)):null},{dataFinal:e.somenteEstaReferencia?Object(u.Mb)(Object(u.hc)(l)):null}])}})),o.a.createElement("div",{className:"flex-grow-1",style:{marginRight:20}},o.a.createElement(u.K,{id:"dataInicial",label:"Dt. Inicial",formProps:Object(l.a)(Object(l.a)({},t),{},{validation:{required:!0}}),isPrependLabel:!0,type:u.L.DATE,disabled:A})),o.a.createElement("div",{className:"flex-grow-1"},o.a.createElement(u.K,{id:"dataFinal",label:"Dt. Final",formProps:t,isPrependLabel:!0,type:u.L.DATE,disabled:A})))))),o.a.createElement("div",{className:"d-flex"},o.a.createElement("div",{style:{width:350}},("VALOR"===b||"DIAS"===b)&&o.a.createElement(u.K,{id:"variavel",label:"Valor"+("DIAS"===b?" Dias":""),formProps:Object(l.a)(Object(l.a)({},t),{},{validation:{required:!f}}),isPrependLabel:!0,disabled:f}),"HORAS"===b&&o.a.createElement(u.K,{id:"variavel",label:"Valor",formProps:Object(l.a)(Object(l.a)({},t),{},{validation:{required:!f}}),isPrependLabel:!0,type:u.L.FRACTION_OF_TIME,disabled:f})),o.a.createElement("div",{style:{marginLeft:20,marginTop:10,width:150}},o.a.createElement(u.n,{id:"valorManual",formProps:t,label:"Valor Manual",onChange:N})),o.a.createElement("div",{style:{marginLeft:20,marginTop:10,width:230}},o.a.createElement(u.n,{id:"principal",formProps:t,label:"Exibir no contra cheque"}))))};a.default=(e=>{const a=Object(c.g)(),t=Object(u.Tb)(e),I=Object(i.c)(e=>e.globalReducer),R=Object(r.b)({defaultValues:{apresentacao:p.value,eventos:[],eventosFiltrados:[],tipoCalculo:P.f.value},mode:"onBlur"}),A=Object(i.b)();Object(n.useEffect)(()=>{setTimeout(()=>{R.register({name:"eventos"}),t&&t.id&&(R.register({name:"vinculo"}),V(t.id))},700)},[]);const V=(e=null)=>{const a=e||R.getValues().vinculo.id;A(Object(h.r)()),Object(u.Kb)({id:a},m.a,{thenFunction:e=>{R.setValue("vinculo",e),D(a)}})},D=(e,a=P.f.value,t=p.value)=>{Object(u.Ib)({className:b,expressions:[{fieldName:"vinculo.id",value:e}],fetchType:"ALL",max:1e3,start:0},{thenFunction:e=>{A(u.mc.hideProgress()),R.setValue("eventos",e.content),x(),L(e.content,a,t)}})},L=(e,a,t)=>{const l=Object(u.Mb)(Object(u.ic)(I.globalParameter.empresaMFP.referencia,0));R.setValue("eventosFiltrados",e.filter(e=>e.tipoCalculo===a&&((e,a,t)=>({[p.value]:()=>{const e=Object(u.tb)(a.dataInicial,t)<=0&&Object(u.tb)(a.dataFinal,t)>=0,l=Object(u.tb)(a.dataInicial,t)<=0&&Object(u.Xb)(a.dataFinal);return e||l},[E.value]:()=>Object(u.tb)(a.dataInicial,t)>0,[v.value]:()=>Object(u.tb)(a.dataFinal,t)<0,[f.value]:()=>!0})[e]()||!1)(t,e,l)))},S=e=>{const a=R.getValues();L(a.eventos,e,a.apresentacao)},T=e=>{const a=R.getValues();L(a.eventos,a.tipoCalculo,e)},x=()=>{const e=R.getValues(),a=Object(h.e)(e.vinculo.movimentacoes),t=Object(h.j)(e.vinculo,I.globalParameter.empresaMFP.referencia),l=e.vinculo.trabalhador.dependentes.filter(e=>e.dependeteSalarioFamilia).length,n=e.vinculo.trabalhador.dependentes.filter(e=>e.dependenteIRPJ).length;R.setValue([{nomeTrabalhador:e.vinculo.label},{dataAdmissao:e.vinculo.dataAdmissao},{dataAfastamento:a&&a.dataAfastamento},{dataRetorno:a&&a.dataRetorno},{motivoAfastamento:a&&a.motivoAfastamento},{categoria:e.vinculo.cbo.descricao},{valeTransporte:"Existe(m) ".concat(e.vinculo.valesTransporte.length," vale(s) cadastrado(s)")},{nroDependentesSalarioFamilia:l},{nroDependentesIRPF:n},{salarioValor:Object(u.zb)(t.valor,null)},{numeroHorasContratuais:Object(h.n)(t.numeroHorasContratuais)},{valorTotalOutrasRemuneracoes:Object(h.s)(t.outrasRemuneracoes)}])},M=e=>(a,t)=>(Object(u.Xb)(a.id)?t():(A(Object(h.r)()),Object(F.q)(a,{thenFunction:l=>{if(A(u.mc.hideProgress()),l){const l=Object(u.pc)(I.globalParameter.empresaMFP.referencia),n=g.a.find(P.k,a.tipoCalculo).label,o=e?"altera\xe7\xe3o":"remo\xe7\xe3o";Object(h.o)("Esse evento j\xe1 foi calculado. Para a ".concat(o," ter efeito \xe9 necess\xe1rio refazer os c\xe1lculos ")+"de ".concat(n," a partir de ").concat(l,". Deseja continuar?")).then(()=>t())}else t()}})),{async:!0}),N=()=>{e.openViaDock||R.reset(),a.goBack()},w=[{dataField:"dataInicial",order:u.O.ASC}],K={columns:[{dataField:"evento.codigo",text:"C\xf3digo"},{dataField:"evento.descricao",text:"Descri\xe7\xe3o"},Object(u.Eb)({dataField:"evento.tipo",text:"Tipo"},j.b),{dataField:"variavel",text:"Vari\xe1vel"},{dataField:"dataInicial",text:"In\xedcio"},{dataField:"dataFinal",text:"Fim"},Object(u.pb)({dataField:"valorManual",text:"Valor Manual"}),{dataField:"evento.formula",text:"F\xf3rmula"}],detailView:_,detailViewSize:"large",detailViewWikiId:510,formProps:R,onBeforeEdit:M(!0),onBeforeRemove:M(!1),onChange:(e,a)=>{A(Object(h.r)()),Object(u.kc)(a,b,{thenFunction:()=>{const e=R.getValues();D(e.vinculo.id,e.tipoCalculo,e.apresentacao)}})},propName:"eventosFiltrados",title:"Lan\xe7amento de Eventos"},y={cancelButton:{label:"Fechar"},confirmButton:null,onCancel:N},k=()=>o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"tipoCalculo",label:"Tipo de C\xe1lculo",formProps:R,isPrependLabel:!0,inputDropDownProps:{optionsProvider:P.k,selectProps:{isClearable:!1}},type:u.L.DROP_DOWN,onChange:S})),o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"apresentacao",label:"Apresenta\xe7\xe3o dos Eventos",formProps:R,isPrependLabel:!0,inputDropDownProps:{optionsProvider:O},type:u.L.DROP_DOWN,onChange:T}))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.g,{title:"Trabalhador"},o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"nomeTrabalhador",formProps:R,disabled:!0,label:"Nome",isPrependLabel:!0}))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"dataAdmissao",formProps:R,disabled:!0,label:"Dt. Admiss\xe3o",isPrependLabel:!0})),o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"dataAfastamento",formProps:R,disabled:!0,label:"Dt. Afast",isPrependLabel:!0})),o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"dataRetorno",formProps:R,disabled:!0,label:"Dt. Ret",isPrependLabel:!0}))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"motivoAfastamento",formProps:R,disabled:!0,label:"Motivo Afastamento",isPrependLabel:!0}))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"categoria",formProps:R,disabled:!0,label:"Categoria",isPrependLabel:!0})),o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"valeTransporte",formProps:R,disabled:!0,label:"V. Transp.",isPrependLabel:!0}))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"nroDependentesSalarioFamilia",formProps:R,disabled:!0,label:"Dep. S. F.",isPrependLabel:!0})),o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"nroDependentesIRPF",formProps:R,disabled:!0,label:"Dep. I. R.",isPrependLabel:!0})),o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"salarioValor",formProps:R,disabled:!0,label:"Sal\xe1rio",isPrependLabel:!0}))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"numeroHorasContratuais",formProps:R,disabled:!0,label:"N\xba Horas Cont.",isPrependLabel:!0})),o.a.createElement(d.a,null,o.a.createElement(u.K,{id:"valorTotalOutrasRemuneracoes",formProps:R,disabled:!0,label:"Out. Rem.",isPrependLabel:!0})))))),o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(u.w,Object.assign({},e,{defaultSortDirection:u.O.ASC,defaultSorted:w},K,{keyField:"rowIndex"})))));return R.watch("eventosFiltrados"),o.a.createElement(u.hb,{title:"Manuten\xe7\xe3o de Eventos do Cargo do Trabalhador",wrapBody:!0===e.openViaDock,wikiId:510},!0===e.openViaDock?o.a.createElement("div",{className:"m-3"},k(),o.a.createElement(u.R,{handleClose:N,hideSubmitButton:!0,btnCloseLabel:"Fechar"})):o.a.createElement(u.ib,{formProps:R,finishProps:y,onAfterPageChange:e=>{"eventos"===e&&V()}},o.a.createElement(u.jb,{id:"vinculo",title:"Sele\xe7\xe3o do v\xednculo"},o.a.createElement(s.a,null,o.a.createElement(d.a,null,o.a.createElement(C.a,{id:"vinculo",formProps:Object(l.a)(Object(l.a)({},R),{},{validation:{required:!0}}),label:"Vinculo",isPrependLabel:!0})))),o.a.createElement(u.jb,{id:"eventos",title:"Eventos"},k())))})},883:function(e,a,t){"use strict";t.d(a,"f",function(){return l}),t.d(a,"a",function(){return n}),t.d(a,"e",function(){return o}),t.d(a,"g",function(){return r}),t.d(a,"h",function(){return i}),t.d(a,"c",function(){return c}),t.d(a,"d",function(){return s}),t.d(a,"i",function(){return d}),t.d(a,"j",function(){return u}),t.d(a,"k",function(){return m}),t.d(a,"b",function(){return b});const l={value:"FOLHA",label:"Folha"},n={value:"ADIANTAMENTO",label:"Adiantamento"},o={value:"FERIAS",label:"F\xe9rias"},r={value:"RECISAO",label:"Rescis\xe3o"},i={value:"RECISAO_COMPLEMENTAR",label:"Rescis\xe3o Complementar"},c={value:"DECIMO_TERCEIRO_PARCELA_1",label:"13\xba 1\xaa Parcela"},s={value:"DECIMO_TERCEIRO_PARCELA_2",label:"13\xba 2\xaa Parcela"},d={value:"RESILICAO",label:"Resili\xe7\xe3o"},u={value:"RESILICAO_COMPLEMENTAR",label:"Resili\xe7\xe3o Complementar"},m=[l,n,o,r,i,c,s,d,u],b=[r,i]},907:function(e,a,t){"use strict";var l=t(6),n=t(0),o=t.n(n),r=t(774),i=t(775),c=t(2),s=t(955);a.a=(e=>{return o.a.createElement(c.K,Object.assign({},e,{type:c.L.INPUT_SEARCH,inputSearchProps:Object(l.a)(Object(l.a)({},e.inputSearchProps),{},{columns:[{dataField:"codigo",text:"C\xf3digo"},{dataField:"descricao",text:"Descri\xe7\xe3o"}],dtoClassName:s.a,searchViewId:"EventoSearchView"}),onChange:a=>{e.onChange&&e.onChange(a),a&&e.naturezasValidas&&e.naturezasValidas.length>0&&void 0===e.naturezasValidas.find(e=>e.value===a.naturezaEvento)&&(e.formProps.setValue(e.id,null),c.ob.emit(c.a.SHOW,{message:o.a.createElement(o.a.Fragment,null,o.a.createElement("p",null,"Apenas eventos com as seguintes naturezas s\xe3o permitidas:"),o.a.createElement(r.a,{variant:"flush"},e.naturezasValidas.map(e=>o.a.createElement(i.a,{key:e.value},e.label)))),type:c.f.ERROR}))}}))})},955:function(e,a,t){"use strict";t.d(a,"a",function(){return l});const l="br.com.projetusinformatica.calima.mfp.model.dto.eventoexample"},984:function(e,a,t){"use strict";t.d(a,"b",function(){return o}),t.d(a,"a",function(){return r});const l={label:"Informativo",value:"INFORMATIVO"},n={label:"Informativo Dedutor",value:"INFORMATIVO_DEDUTOR"},o=[{label:"Rendimento",value:"REDIMENTO"},{label:"Desconto",value:"DESCONTO"},{label:"Calculado",value:"CALCULADO"},l,n],r=[l,n]}}]);
//# sourceMappingURL=11.70f7bc3f.chunk.js.map