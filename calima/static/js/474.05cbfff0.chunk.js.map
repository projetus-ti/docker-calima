{"version":3,"sources":["models/dtos/mfp/valorImpostoPLR.ts","views/pages/mfp/valorImpostoPLR/ValorImpostoPLRFaixaIRRFEditView.tsx","views/pages/mfp/valorImpostoPLR/ValorImpostoPLREditView.tsx"],"names":["__webpack_require__","d","__webpack_exports__","CLASS_NAME","ValorImpostoPLRFaixaIRRFEditView","props","formProps","useForm","defaultValues","Object","objectSpread2","aliquota","vrDeducao","vrRendimentoAte","selectedItem","mode","react_default","a","createElement","summer_esm","handleSubmit","handleCancel","Row","Col","validation","required","min","id","isPrependLabel","label","placeholder","type","InputType","NUMBER","max","ValorImpostoPLREditView","getSelectedItem","defaultSortProps","dataField","order","OrderType","DESC","valorImpostoFaixaPlrFormProps","columns","formatter","decimalFormatter","text","percentualFormatter","detailView","propName","title","editViewProps","dtoClassName","validateExtras","formData","faixasIRRF","erros","sort","b","ultimaFaixaIRRF","length","Number","push","REFERENCE","assign","defaultSortDirection","defaultSorted","keyField"],"mappings":"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","file":"static/js/474.05cbfff0.chunk.js","sourcesContent":["import { Basic } from 'summer';\r\nimport { ValorImpostoPLRFaixaIRRF } from './valorImpostoPLRFaixaIRRF';\r\n\r\nexport interface ValorImpostoPLR extends Basic {\r\n  referenciaInicial?: string;\r\n  faixasIRRF?: ValorImpostoPLRFaixaIRRF[];\r\n}\r\n\r\nexport const CLASS_NAME = 'br.com.projetusinformatica.calima.mfp.model.dto.valorimpostoplr';\r\n","import React, { FC } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Col, Row } from 'reactstrap';\r\nimport { DetailEditForm, DetailEditViewFormProps, InputGroupInline, InputType } from 'summer';\r\nimport { ValorImpostoPLRFaixaIRRF } from '../../../../models/dtos/mfp/valorImpostoPLRFaixaIRRF';\r\n\r\nconst ValorImpostoPLRFaixaIRRFEditView: FC<DetailEditViewFormProps<ValorImpostoPLRFaixaIRRF>> = props => {\r\n  const formProps = useForm<ValorImpostoPLRFaixaIRRF>({\r\n    defaultValues: {\r\n      aliquota: 0,\r\n      vrDeducao: 0,\r\n      vrRendimentoAte: 9999999999999,\r\n      ...props.selectedItem,\r\n    },\r\n    mode: 'onBlur',\r\n  });\r\n\r\n  return (\r\n    <DetailEditForm handleSubmit={props.handleSubmit} handleCancel={props.handleCancel} formProps={formProps}>\r\n      <Row>\r\n        <Col>\r\n          <InputGroupInline\r\n            formProps={{ ...formProps, validation: { required: true, min: 1 } }}\r\n            id=\"vrRendimentoAte\"\r\n            isPrependLabel={true}\r\n            label=\"Limite do Rendimento\"\r\n            placeholder=\"Informe a Abreviação da Série\"\r\n            type={InputType.NUMBER}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <InputGroupInline\r\n            formProps={{ ...formProps, validation: { required: true, min: 0, max: 100 } }}\r\n            id=\"aliquota\"\r\n            isPrependLabel={true}\r\n            label=\"Alíquota\"\r\n            placeholder=\"Informe a Alíquota\"\r\n            type={InputType.NUMBER}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col>\r\n          <InputGroupInline\r\n            formProps={{ ...formProps, validation: { required: true, min: 0 } }}\r\n            id=\"vrDeducao\"\r\n            isPrependLabel={true}\r\n            label=\"Valor Dedução\"\r\n            placeholder=\"Informe o valor dedução\"\r\n            type={InputType.NUMBER}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </DetailEditForm>\r\n  );\r\n};\r\n\r\nexport default ValorImpostoPLRFaixaIRRFEditView;\r\n","import React, { FC } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { RouteComponentProps } from 'react-router';\r\nimport { Col, Row } from 'reactstrap';\r\nimport {\r\n  ColumnsProps,\r\n  decimalFormatter,\r\n  DefaultSortProps,\r\n  DetailManagerForm,\r\n  DetailManagerFormProps,\r\n  EditForm,\r\n  EditViewProps,\r\n  getSelectedItem,\r\n  InputGroupInline,\r\n  InputType,\r\n  OrderType,\r\n  percentualFormatter,\r\n  WindowComponent,\r\n} from 'summer';\r\nimport { CLASS_NAME, ValorImpostoPLR } from '../../../../models/dtos/mfp/valorImpostoPLR';\r\nimport { ValorImpostoPLRFaixaIRRF } from '../../../../models/dtos/mfp/valorImpostoPLRFaixaIRRF';\r\nimport ValorImpostoPLRFaixaIRRFEditView from './ValorImpostoPLRFaixaIRRFEditView';\r\n\r\ninterface ValorImpostoPLREditViewProps extends EditViewProps<ValorImpostoPLR> {}\r\n\r\nconst ValorImpostoPLREditView: FC<ValorImpostoPLREditViewProps & RouteComponentProps> = props => {\r\n  const selectedItem = getSelectedItem(props);\r\n  const formProps = useForm<ValorImpostoPLR>({\r\n    defaultValues: selectedItem,\r\n    mode: 'onBlur',\r\n  });\r\n\r\n  const validateExtras = (formData: ValorImpostoPLR) => {\r\n    const faixasIRRF = formData.faixasIRRF;\r\n    const limiteRendimento = 9999999999999;\r\n    const erros = [];\r\n\r\n    if (faixasIRRF) {\r\n      faixasIRRF.sort((a, b) => a.vrRendimentoAte - b.vrRendimentoAte);\r\n      const ultimaFaixaIRRF: ValorImpostoPLRFaixaIRRF = faixasIRRF[faixasIRRF.length - 1];\r\n\r\n      if (Number(ultimaFaixaIRRF.vrRendimentoAte) !== limiteRendimento) {\r\n        erros.push('O Valor de Limite do Rendimento na última faixa de IRRF deve ser igual a 99.999.999.999.99');\r\n      }\r\n    } else {\r\n      erros.push('Deve exister pelo menos uma faixa IRRF.');\r\n    }\r\n\r\n    return erros;\r\n  };\r\n\r\n  const defaultSortProps: DefaultSortProps[] = [\r\n    {\r\n      dataField: 'vrRendimentoAte',\r\n      order: OrderType.DESC,\r\n    },\r\n  ];\r\n\r\n  const colunas: ColumnsProps[] = [\r\n    {\r\n      dataField: 'vrRendimentoAte',\r\n      formatter: decimalFormatter,\r\n      text: 'Limite do Rendimento',\r\n    },\r\n    {\r\n      dataField: 'aliquota',\r\n      formatter: percentualFormatter,\r\n      text: 'aliquota',\r\n    },\r\n    {\r\n      dataField: 'vrDeducao',\r\n      formatter: decimalFormatter,\r\n      text: 'Valor Dedução',\r\n    },\r\n  ];\r\n\r\n  const valorImpostoFaixaPlrFormProps: DetailManagerFormProps = {\r\n    columns: colunas,\r\n    detailView: ValorImpostoPLRFaixaIRRFEditView,\r\n    formProps,\r\n    propName: 'faixasIRRF',\r\n    title: 'Configuração Valor Imposto PLR faixa IRRF - Segregação',\r\n  };\r\n\r\n  return (\r\n    <WindowComponent title=\"Manutenção de valor do PLR Anual\">\r\n      <EditForm formProps={formProps} editViewProps={props} dtoClassName={CLASS_NAME} validateExtras={validateExtras}>\r\n        <Row>\r\n          <Col>\r\n            <InputGroupInline\r\n              formProps={{ ...formProps, validation: { required: true } }}\r\n              id=\"referenciaInicial\"\r\n              isPrependLabel={true}\r\n              label=\"Referência Inicial\"\r\n              type={InputType.REFERENCE}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <DetailManagerForm\r\n              {...props}\r\n              defaultSortDirection={OrderType.DESC}\r\n              defaultSorted={defaultSortProps}\r\n              {...valorImpostoFaixaPlrFormProps}\r\n              keyField=\"rowIndex\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n      </EditForm>\r\n    </WindowComponent>\r\n  );\r\n};\r\n\r\nexport default ValorImpostoPLREditView;\r\n"],"sourceRoot":""}