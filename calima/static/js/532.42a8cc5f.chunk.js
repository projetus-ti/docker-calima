(window.webpackJsonp=window.webpackJsonp||[]).push([[532],{1156:function(e,a,t){"use strict";t.r(a);var n=t(43),r=t.n(n),l=t(67),o=t(12),c=t(0),i=t.n(c),s=t(98),u=t(19),m=t(30),d=t(22),p=t(394),b=t(46),E=t(773),g=t(44),h=t(198),f=t(148),C=t(395),O=t(2),j=t(382),k=t.n(j),v=t(99),N=t(49);const R={senha:"",usuario:""};var w;!function(e){e[e.LOGIN=0]="LOGIN",e[e.RECUPERAR=1]="RECUPERAR",e[e.TOKEN=2]="TOKEN"}(w||(w={}));const x="Campo obrigat\xf3rio",F=Object(m.i)(({history:e,location:a})=>{const t=Object(O.vc)("codigoCliente"),n=Object(o.a)(t,2),m=n[0],j=n[1],F=Object(O.vc)("loginToken"),I=Object(o.a)(F,2),q=I[0],y=I[1],A=Object(c.useState)(w.LOGIN),P=Object(o.a)(A,2),L=P[0],S=P[1];R.codigoCliente=m;const T=Object(s.b)({defaultValues:R,mode:"onBlur"}),U=T.register,z=T.errors,G=T.handleSubmit,K=T.triggerValidation,V=Object(c.useState)(!1),_=Object(o.a)(V,2),H=_[0],J=_[1],B=Object(u.b)(),D=function(){var t=Object(l.a)(r.a.mark(function t(n,l){var o,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:l.preventDefault(),J(!0),o=(e=>{Object(O.tc)(e,O.A),J(!1)}),c=(()=>{Object(O.wc)({codigoCliente:n.codigoCliente,errorFunc:o,login:n.usuario,resultFunc:(t,r)=>{y(r),O.Hb.production&&(O.Hb.siteURL=t.urlSistema),j(n.codigoCliente),Object(v.l)({codigoCliente:n.codigoCliente,login:n.usuario,senha:n.senha},{errorFunction:o,thenFunction:t=>{B(O.ac.login({codigoCliente:n.codigoCliente,usuario:n.usuario})),t.usuario.administrador||1===t.usuario.id?Object(v.d)(t.usuario,{errorFunction:o,thenFunction:n=>{n?(B(Object(N.d)(t)),e.push(a.pathname+"ger/empresaSearchView")):(B(Object(N.d)(t)),e.push(a.pathname+"ger/dashboard"))}}):(B(Object(N.d)(t)),e.push(a.pathname+"ger/dashboard"))}})},senha:n.senha,tokenAcesso:q,warningFunc:(e,a)=>{let t=null;if(a){const n=()=>window.open(a,"_blank");t=i.a.createElement("div",{onClick:n},"$",e)}else t=e;Object(O.tc)(t,O.gb),J(!1)}})}),t.t0=L,t.next=t.t0===w.RECUPERAR?7:t.t0===w.TOKEN?9:11;break;case 7:return Object(O.pc)({errorFunc:o,login:n.usuario,resultFunc:(e,a)=>{y(a),S(w.LOGIN),Object(O.tc)("Sua nova senha foi enviada para o e-mail informado. Por favor verifique sua caixa de entrada.",O.I)},tokenAcesso:q}),t.abrupt("break",12);case 9:return Object(O.cc)({errorFunc:o,resultFunc:(e,a)=>{y(a),n.senha=e.senha,n.usuario=e.usuario,c()},token:n.senha,tokenAcesso:q}),t.abrupt("break",12);case 11:c();case 12:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),$=!(!z.codigoCliente||!z.codigoCliente.message),M=!(!z.usuario||!z.usuario.message),Q=!(!z.senha||!z.senha.message),W=i.a.createElement(d.a,{size:"sm",color:"link",block:!0,onClick:()=>{S(w.LOGIN),K()}},"Voltar"),X=L===w.LOGIN?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,null,i.a.createElement("label",null,"C\xf3digo"),i.a.createElement(b.a,{placeholder:"Informe seu c\xf3digo",type:"number",id:"codigoCliente",name:"codigoCliente",innerRef:U({required:x}),invalid:$}),i.a.createElement(E.a,null,x),i.a.createElement(g.a,{target:"codigoCliente",placement:"bottom"},"Esse c\xf3digo corresponde ao C\xf3digo do Cliente no Cadastro da Projetus. Caso tenha esquecido clique em 'Recuperar senha' para obt\xea-lo.")),i.a.createElement(p.a,null,i.a.createElement("label",null,"Usu\xe1rio"),i.a.createElement(b.a,{placeholder:"Informe seu usu\xe1rio",type:"text",name:"usuario",innerRef:U({required:x}),invalid:M}),i.a.createElement(E.a,null,x)),i.a.createElement(p.a,null,i.a.createElement("label",null,"Senha"),i.a.createElement(b.a,{placeholder:"Informe sua senha",type:"password",name:"senha",innerRef:U({required:x}),invalid:Q}),i.a.createElement(E.a,null,x)),i.a.createElement(d.a,{size:"lg",block:!0,color:"first",disabled:H,className:"mb-2"},"Entrar"),i.a.createElement("a",{href:"https://ajuda.projetusti.com.br/index.php",target:"_blank",rel:"noopener noreferrer",className:"btn btn-neutral-dark btn-block"},"Ajuda"),i.a.createElement("div",{className:"d-flex justify-content-between pt-3"},i.a.createElement(d.a,{size:"sm",color:"link",className:"px-0",onClick:()=>{S(w.TOKEN),K()}},"Login via Token"),i.a.createElement(d.a,{size:"sm",color:"link",className:"px-0",onClick:()=>{S(w.RECUPERAR),K()}},"Recuperar senha"))):null,Y=L===w.TOKEN?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,null,i.a.createElement("label",null,"C\xf3digo"),i.a.createElement(b.a,{placeholder:"Informe seu c\xf3digo",type:"number",id:"codigoCliente",name:"codigoCliente",innerRef:U({required:x}),invalid:$}),i.a.createElement(E.a,null,x),i.a.createElement(g.a,{target:"codigoCliente",placement:"bottom"},"Esse c\xf3digo corresponde ao C\xf3digo do Cliente do Cadastro da Projetus. Caso tenha esquecido clique em 'Recuperar senha' para obt\xea-lo.")),i.a.createElement(p.a,null,i.a.createElement("label",null,"Token"),i.a.createElement(b.a,{placeholder:"Informe o token",type:"password",name:"senha",innerRef:U({required:x}),invalid:Q}),i.a.createElement(E.a,null,x)),i.a.createElement(d.a,{size:"lg",block:!0,color:"first",disabled:H},"Entrar"),W):null,Z=L===w.RECUPERAR?i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,null,i.a.createElement("label",null,"Usu\xe1rio"),i.a.createElement(b.a,{placeholder:"Informe seu usu\xe1rio ou e-mail",type:"text",name:"usuario",innerRef:U({required:x}),invalid:M}),i.a.createElement(E.a,null,x)),i.a.createElement(d.a,{size:"lg",block:!0,color:"first",disabled:H},"Recuperar"),W):null;return i.a.createElement("div",{className:"app-wrapper min-vh-100"},i.a.createElement("div",{className:"app-main min-vh-100"},i.a.createElement("div",{className:"app-content p-0"},i.a.createElement("div",{className:"app-content--inner d-flex align-items-center w-100"},i.a.createElement("div",{className:"container"},i.a.createElement(h.a,{className:"justify-content-center"},i.a.createElement(f.a,{xl:5,lg:6,md:8,xs:12,className:"w-100 d-flex flex-column"},i.a.createElement("div",{className:"text-center"},i.a.createElement("img",{src:k.a,alt:"Calima ERP"})),i.a.createElement("div",{className:"w-100 bg-white rounded p-4 my-4"},i.a.createElement(C.a,{noValidate:!0,onSubmit:G(D)},X,Y,Z)),i.a.createElement("div",{className:"text-center pt-4 text-black-50"},"N\xe3o possui login?"," ",i.a.createElement("strong",null,i.a.createElement("a",{href:"https://centraldocliente.projetusti.com.br/#/cadastro",target:"_blank",rel:"noopener noreferrer"},"Cadastre-se agora!"))))))))))});a.default=F}}]);
//# sourceMappingURL=532.42a8cc5f.chunk.js.map