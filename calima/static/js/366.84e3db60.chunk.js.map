{"version":3,"sources":["views/pages/mlf/cfop/CFOPEditView.tsx","../node_modules/reactstrap/es/CardTitle.js","services/mlf.service.ts","models/dtos/ger/cfop.ts"],"names":["CFOPEditView","props","selectedItem","getSelectedItem","_useForm","useForm","defaultValues","mode","reset","formProps","Object","C_Program_Files_x86_Jenkins_workspace_Calima_react_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","summer__WEBPACK_IMPORTED_MODULE_11__","title","wikiId","editViewProps","dtoClassName","CLASS_NAME","afterPersist","data","findReinfCFOPConfig","id","errorFunction","mensagem","showToast","ERROR","thenFunction","reinfCFOPConfig","reinfConfig","cfop","persist","result","reactstrap__WEBPACK_IMPORTED_MODULE_4__","reactstrap__WEBPACK_IMPORTED_MODULE_5__","C_Program_Files_x86_Jenkins_workspace_Calima_react_react_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__","validation","required","onlyNumber","isPrependLabel","label","labelWidth","placeholder","maxLength","type","InputType","TEXT_AREA","reactstrap__WEBPACK_IMPORTED_MODULE_6__","style","marginBottom","borderWidth","reactstrap__WEBPACK_IMPORTED_MODULE_7__","reactstrap__WEBPACK_IMPORTED_MODULE_8__","hidden","reactstrap__WEBPACK_IMPORTED_MODULE_9__","tag","Row","reactstrap__WEBPACK_IMPORTED_MODULE_10__","name","innerRef","register","_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_babel_runtime_helpers_esm_objectWithoutPropertiesLoose__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2__","n","prop_types__WEBPACK_IMPORTED_MODULE_3__","prop_types__WEBPACK_IMPORTED_MODULE_3___default","classnames__WEBPACK_IMPORTED_MODULE_4__","classnames__WEBPACK_IMPORTED_MODULE_4___default","_utils__WEBPACK_IMPORTED_MODULE_5__","propTypes","className","string","cssModule","object","CardTitle","Tag","attributes","classes","defaultProps","__webpack_exports__","d","findEspecieByModelo","getLivroFolhaMLF","refazerLancamentosContabeis","refazerLancamentosReinf","findConfigReinfEmpresa","importarIntegracaoFiscalContabil","validarIE","summer__WEBPACK_IMPORTED_MODULE_0__","getService","create","modelo","isImportacao","param","send","post","idCFOP","get","concat","idGerEmpresa","refazerLancamentosContabeisParam","refazerLancamentosReinfParam","idEmpresaMlf","importarParam","inscricaoEstadual","unidadeFederacao"],"mappings":"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","file":"static/js/366.84e3db60.chunk.js","sourcesContent":["import React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { RouteComponentProps } from 'react-router';\r\nimport { Card, CardBody, CardTitle, Col, CustomInput, FormGroup, Row } from 'reactstrap';\r\nimport {\r\n  EditForm,\r\n  EditViewProps,\r\n  ERROR,\r\n  getSelectedItem,\r\n  InputGroupInline,\r\n  InputType,\r\n  onlyNumber,\r\n  persist,\r\n  showToast,\r\n  WindowComponent,\r\n} from 'summer';\r\nimport { Cfop, CLASS_NAME } from '../../../../models/dtos/ger/cfop';\r\nimport { ReinfCFOPConfig } from '../../../../models/dtos/mlf/reinfCFOPConfig';\r\nimport { findReinfCFOPConfig } from '../../../../services/mlf.service';\r\n\r\ninterface CFOPEditProps extends EditViewProps<Cfop> {}\r\n\r\nconst CFOPEditView: React.FC<CFOPEditProps & RouteComponentProps> = props => {\r\n  const selectedItem = getSelectedItem(props);\r\n\r\n  const { reset, ...formProps } = useForm<Cfop>({ defaultValues: selectedItem, mode: 'onBlur' });\r\n\r\n  const defaultWidth: number = 100;\r\n\r\n  function afterPersist(data: Cfop): void {\r\n    findReinfCFOPConfig(data.id, {\r\n      errorFunction: mensagem => {\r\n        showToast(mensagem, ERROR);\r\n      },\r\n      thenFunction: (reinfCFOPConfig: ReinfCFOPConfig) => {\r\n        if (reinfCFOPConfig.id === null) {\r\n          const reinfConfig: ReinfCFOPConfig = {\r\n            cfop: data,\r\n          };\r\n\r\n          persist(reinfConfig, 'reinfcfopconfig', {\r\n            errorFunction: mensagem => {\r\n              showToast(mensagem, ERROR);\r\n            },\r\n            thenFunction: result => {\r\n              reset(result);\r\n            },\r\n          });\r\n        } else {\r\n          reset(reinfCFOPConfig);\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <WindowComponent title=\"Manutenção de CFOP\" wikiId={40}>\r\n      <EditForm formProps={formProps} editViewProps={props} dtoClassName={CLASS_NAME} afterPersist={afterPersist}>\r\n        <Row>\r\n          <Col>\r\n            <InputGroupInline\r\n              formProps={{ ...formProps, validation: { required: true, ...onlyNumber(0, 4) } }}\r\n              id=\"codigo\"\r\n              isPrependLabel={true}\r\n              label=\"Código\"\r\n              labelWidth={defaultWidth}\r\n              placeholder=\"Informe o Código do CFOP\"\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <InputGroupInline\r\n              formProps={{ ...formProps, validation: { required: true, maxLength: 400 } }}\r\n              id=\"descricao\"\r\n              isPrependLabel={true}\r\n              label=\"Descrição\"\r\n              labelWidth={defaultWidth}\r\n              placeholder=\"Informe a Descrição do CFOP\"\r\n              type={InputType.TEXT_AREA}\r\n            />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <Card style={{ marginBottom: '16px', borderWidth: 'thin' }}>\r\n              <CardBody>\r\n                <CardTitle>Configurações dos Livros Fiscais</CardTitle>\r\n                <InputGroupInline formProps={formProps} id=\"cfopMLF.id\" hidden={true} />\r\n                <FormGroup tag={Row}>\r\n                  <Col>\r\n                    <CustomInput\r\n                      id=\"checkAtivoPermanente\"\r\n                      label=\"Ativo Permanente\"\r\n                      name=\"cfopMLF.ativoPermanente\"\r\n                      innerRef={formProps.register}\r\n                      type=\"switch\"\r\n                    />\r\n                  </Col>\r\n                </FormGroup>\r\n                <FormGroup tag={Row}>\r\n                  <Col>\r\n                    <CustomInput\r\n                      id=\"checkAdicionarImpostosFederais\"\r\n                      label=\"Adicionar ao cálculo dos Impostos Federais\"\r\n                      name=\"cfopMLF.adicionarImpostosFederais\"\r\n                      innerRef={formProps.register}\r\n                      type=\"switch\"\r\n                    />\r\n                  </Col>\r\n                </FormGroup>\r\n\r\n                <FormGroup tag={Row}>\r\n                  <Col>\r\n                    <CustomInput\r\n                      id=\"checkDiferencaAliquota\"\r\n                      label=\"Calcular Diferença de Alíquota\"\r\n                      name=\"cfopMLF.diferencaAliquota\"\r\n                      innerRef={formProps.register}\r\n                      type=\"switch\"\r\n                    />\r\n                  </Col>\r\n                </FormGroup>\r\n\r\n                <FormGroup tag={Row}>\r\n                  <Col>\r\n                    <CustomInput\r\n                      id=\"checkUsoConsumo\"\r\n                      label=\"Uso e/ou Consumo\"\r\n                      name=\"cfopMLF.usoConsumo\"\r\n                      innerRef={formProps.register}\r\n                      type=\"switch\"\r\n                    />\r\n                  </Col>\r\n                </FormGroup>\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </EditForm>\r\n    </WindowComponent>\r\n  );\r\n};\r\n\r\nexport default CFOPEditView;\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  className: PropTypes.string,\n  cssModule: PropTypes.object\n};\nvar defaultProps = {\n  tag: 'div'\n};\n\nvar CardTitle = function CardTitle(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      Tag = props.tag,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"tag\"]);\n\n  var classes = mapToCssModules(classNames(className, 'card-title'), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes\n  }));\n};\n\nCardTitle.propTypes = propTypes;\nCardTitle.defaultProps = defaultProps;\nexport default CardTitle;","import { AxiosInstance } from 'axios';\r\nimport { AxiosParam, create, send } from 'summer';\r\nimport { Cfop } from '../models/dtos/ger/cfop';\r\nimport { Especie } from '../models/dtos/ger/especie';\r\nimport { ConfigLivroMLF } from '../models/dtos/mlf/configLivroMLF';\r\nimport { ConfigReinf } from '../models/dtos/mlf/configReinf';\r\nimport { ImportarIntegracaoFiscalContabilParam } from '../models/dtos/mlf/importarIntegracaoFiscalContabilParam';\r\nimport { RefazerLancamentosContabeisParam } from '../models/dtos/mlf/refazerLancamentosContabeisParam';\r\nimport { RefazerLancamentosReinfParam } from '../models/dtos/mlf/refazerLancamentosReinfParam';\r\n\r\nfunction getService(): AxiosInstance {\r\n  return create('/mlf');\r\n}\r\n\r\nexport function findEspecieByModelo(modelo: string, isImportacao: boolean, param: AxiosParam<Especie>) {\r\n  send(\r\n    getService().post<Especie>('/findEspecieByModelo', { modelo, isImportacao }),\r\n    param\r\n  );\r\n}\r\n\r\nexport function findReinfCFOPConfig(idCFOP: number, param: AxiosParam<Cfop>) {\r\n  send(getService().get<Cfop>(`/findReinfCFOPConfig/${idCFOP}`), param);\r\n}\r\n\r\nexport function getLivroFolhaMLF(idGerEmpresa: number, param: AxiosParam<ConfigLivroMLF>) {\r\n  send(getService().get<ConfigLivroMLF>(`/getLivroFolhaMLF/${idGerEmpresa}`), param);\r\n}\r\n\r\nexport function refazerLancamentosContabeis(refazerLancamentosContabeisParam: RefazerLancamentosContabeisParam, param: AxiosParam<any>) {\r\n  send(getService().post<RefazerLancamentosContabeisParam>('/refazerLancamentosContabeis', refazerLancamentosContabeisParam), param);\r\n}\r\n\r\nexport function refazerLancamentosReinf(refazerLancamentosReinfParam: RefazerLancamentosReinfParam, param: AxiosParam<any>) {\r\n  send(getService().post<RefazerLancamentosReinfParam>('/refazerLancamentosReinf', refazerLancamentosReinfParam), param);\r\n}\r\n\r\nexport function findConfigReinfEmpresa(idEmpresaMlf: number, param: AxiosParam<any>) {\r\n  send(getService().get<ConfigReinf>(`/findConfigReinfEmpresa/${idEmpresaMlf}`), param);\r\n}\r\n\r\nexport function importarIntegracaoFiscalContabil(importarParam: ImportarIntegracaoFiscalContabilParam, param: AxiosParam<any>) {\r\n  send(getService().post<any>('/importarIntegracaoFiscalContabil', importarParam), param);\r\n}\r\n\r\nexport function validarIE(inscricaoEstadual: string, unidadeFederacao: string, param: AxiosParam<boolean>) {\r\n  send(\r\n    getService().post<boolean>('/validarIE', { inscricaoEstadual, unidadeFederacao }),\r\n    param\r\n  );\r\n}\r\n","import { Basic } from 'summer';\r\nimport { CfopMLF } from '../mlf/cfopMLF';\r\n\r\nexport interface Cfop extends Basic {\r\n  codigo?: string;\r\n  descricao?: string;\r\n  cfopMLF?: CfopMLF;\r\n}\r\n\r\nexport const CLASS_NAME = 'br.com.projetusinformatica.calima.ger.model.dto.cfop';\r\n"],"sourceRoot":""}